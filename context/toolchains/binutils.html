<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2.2. Binutils &mdash; 龙芯实验室文档 V1.0 文档</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=b01b2dd9" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />

  
    <link rel="shortcut icon" href="../../_static/favicon.jpg"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=3f0bcac8"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=f281be69"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
        <script src="../../_static/translations.js?v=beaddf03"></script>
        <script src="../../_static/design-tabs.js?v=f930bc37"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="2.3. Rust" href="rust.html" />
    <link rel="prev" title="2.1. GCC" href="gcc.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <img src="../../_static/logo.svg" class="logo" alt="Logo"/>
          <a href="../../index.html" class="icon icon-home">
            龙芯实验室文档
          </a>
              <div class="version">
                V1.0
              </div>
<div role="search">
  <form id="evas-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="搜索文档" aria-label="搜索文档" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../preparation/index.html">1. 准备工作</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../preparation/preface.html">1.1. 前言</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../preparation/preface.html#id2">1.1.1. 更新说明</a></li>
<li class="toctree-l3"><a class="reference internal" href="../preparation/preface.html#id3">1.1.2. 仓库地址</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../preparation/tools.html">1.2. 工具链说明</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../preparation/tools.html#gcc">1.2.1. GCC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../preparation/tools.html#llvm">1.2.2. LLVM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../preparation/tools.html#rust">1.2.3. Rust</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../preparation/tools.html#id2">1.3. 模拟器</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../preparation/tools.html#qemu">1.3.1. QEMU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../preparation/tools.html#la-emu">1.3.2. LA_EMU</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../preparation/tools.html#id3">1.4. 操作系统编译</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../preparation/tools.html#loongnix">1.4.1. LoongNix</a></li>
<li class="toctree-l3"><a class="reference internal" href="../preparation/tools.html#uos">1.4.2. UOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../preparation/tools.html#deepin">1.4.3. Deepin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../preparation/tools.html#aosc">1.4.4. AOSC(安同)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../preparation/tools.html#linux-kernel">1.4.5. Linux kernel</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">2. 工具链</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="gcc.html">2.1. GCC</a><ul>
<li class="toctree-l3"><a class="reference internal" href="gcc.html#id1">2.1.1. GCC的相关概念</a><ul>
<li class="toctree-l4"><a class="reference internal" href="gcc.html#id2">2.1.1.1. GCC的基本定义与起源</a></li>
<li class="toctree-l4"><a class="reference internal" href="gcc.html#id4">2.1.1.2. GCC支持的语言与平台</a></li>
<li class="toctree-l4"><a class="reference internal" href="gcc.html#id5">2.1.1.3. GCC的核心功能与特点</a></li>
<li class="toctree-l4"><a class="reference internal" href="gcc.html#id6">2.1.1.4. GCC的最新进展</a></li>
<li class="toctree-l4"><a class="reference internal" href="gcc.html#id7">2.1.1.5. GCC的应用场景</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="gcc.html#id8">2.1.2. 交叉编译器</a></li>
<li class="toctree-l3"><a class="reference internal" href="gcc.html#id9">2.1.3. 常见的类别组合</a></li>
<li class="toctree-l3"><a class="reference internal" href="gcc.html#id12">2.1.4. 如何编译交叉编译器</a><ul>
<li class="toctree-l4"><a class="reference internal" href="gcc.html#loongarch64-linux-gnu-sf">2.1.4.1. 如何编译loongarch64-linux-gnu[sf]</a></li>
<li class="toctree-l4"><a class="reference internal" href="gcc.html#loongarch64-linux-musl-sf">2.1.4.2. 如何编译loongarch64-linux-musl[sf]</a></li>
<li class="toctree-l4"><a class="reference internal" href="gcc.html#crtn-crti-crtbegin-crtend">2.1.4.3. crtn, crti, crtbegin, crtend有什么区别</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="gcc.html#id22">2.1.5. 常用的参数与选项</a><ul>
<li class="toctree-l4"><a class="reference internal" href="gcc.html#id23">2.1.5.1. GCC常见的参数</a></li>
<li class="toctree-l4"><a class="reference internal" href="gcc.html#picpie">2.1.5.2. PIC与PIE的区别是什么</a></li>
<li class="toctree-l4"><a class="reference internal" href="gcc.html#loongarch">2.1.5.3. 与LoongArch相关的选项说明</a></li>
<li class="toctree-l4"><a class="reference internal" href="gcc.html#c-c">2.1.5.4. C/C++ 预处理器内嵌的宏定义</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2.2. Binutils</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#gnu-binutils">2.2.1. GNU Binutils的相关说明</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">2.2.1.1. <strong>核心定位与背景</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">2.2.1.2. <strong>重要组成部分与功能</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">2.2.1.3. <strong>应用场景</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ld">2.2.2. ld链接器</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id6">2.2.2.1. LD的参数说明</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#readelf">2.2.3. 如何正确的使用readelf</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id7">2.2.3.1. 基础用法与核心选项</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id11">2.2.3.2. 二、高级用法</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id14">2.2.3.3. 三、实战示例</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id18">2.2.3.4. 四、与其他工具对比</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#objdump">2.2.4. objdump</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id19">2.2.4.1. 一、基础用法与核心选项</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id25">2.2.4.2. 二、高级用法</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id31">2.2.4.3. 三、典型应用场景</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id36">2.2.4.4. 四、与其他工具对比</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id37">2.2.4.5. 五、注意事项</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id38">2.2.4.6. 六、实战示例</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#objcopy">2.2.5. objcopy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id42">2.2.5.1. 一、基础用法与核心选项</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id46">2.2.5.2. 二、高级功能</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id51">2.2.5.3. 三、参数详解</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id52">2.2.5.4. 四、典型应用场景</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id56">2.2.5.5. 五、常见问题与解决</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id60">2.2.5.6. 六、与其他工具对比</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id61">2.2.5.7. 七、总结</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="rust.html">2.3. Rust</a><ul>
<li class="toctree-l3"><a class="reference internal" href="rust.html#id1">2.3.1. Rust的概念</a><ul>
<li class="toctree-l4"><a class="reference internal" href="rust.html#id2">2.3.1.1. Rust的起源与发展</a></li>
<li class="toctree-l4"><a class="reference internal" href="rust.html#id3">2.3.1.2. Rust的核心特性</a></li>
<li class="toctree-l4"><a class="reference internal" href="rust.html#id4">2.3.1.3. Rust的应用场景</a></li>
<li class="toctree-l4"><a class="reference internal" href="rust.html#id5">2.3.1.4. Rust的最新进展</a></li>
<li class="toctree-l4"><a class="reference internal" href="rust.html#id6">2.3.1.5. Rust的优缺点</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="rust.html#loongarchtarget">2.3.2. LoongArch支持的target有哪些</a></li>
<li class="toctree-l3"><a class="reference internal" href="rust.html#loongarch">2.3.3. 与LoongArch相关的具体参数那些</a></li>
<li class="toctree-l3"><a class="reference internal" href="rust.html#laexe">2.3.4. 简单的例子说明如何编译成LA架构的EXE文件</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="builtin.html">2.4. 内嵌的函数与指令包装</a><ul>
<li class="toctree-l3"><a class="reference internal" href="builtin.html#gcc">2.4.1. GCC</a></li>
<li class="toctree-l3"><a class="reference internal" href="builtin.html#llvm">2.4.2. LLVM</a></li>
<li class="toctree-l3"><a class="reference internal" href="builtin.html#rust">2.4.3. Rust</a><ul>
<li class="toctree-l4"><a class="reference internal" href="builtin.html#loongarch">2.4.3.1. LoongArch包的相关内容</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="assembly.html">2.5. 汇编代码与链接脚本</a><ul>
<li class="toctree-l3"><a class="reference internal" href="assembly.html#loongarch">2.5.1. 与LoongArch相关的汇编指令</a><ul>
<li class="toctree-l4"><a class="reference internal" href="assembly.html#id2">2.5.1.1. 伪汇编指令</a></li>
<li class="toctree-l4"><a class="reference internal" href="assembly.html#id3">2.5.1.2. 地址加载指令</a></li>
<li class="toctree-l4"><a class="reference internal" href="assembly.html#id4">2.5.1.3. 内嵌汇编</a></li>
<li class="toctree-l4"><a class="reference internal" href="assembly.html#id5">2.5.1.4. 参考阅读</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="assembly.html#id6">2.5.2. 链接脚本</a><ul>
<li class="toctree-l4"><a class="reference internal" href="assembly.html#id7">2.5.2.1. 一、基础语法结构</a></li>
<li class="toctree-l4"><a class="reference internal" href="assembly.html#id8">2.5.2.2. 二、核心命令与操作</a></li>
<li class="toctree-l4"><a class="reference internal" href="assembly.html#id13">2.5.2.3. 三、高级功能</a></li>
<li class="toctree-l4"><a class="reference internal" href="assembly.html#id17">2.5.2.4. 四、典型应用场景</a></li>
<li class="toctree-l4"><a class="reference internal" href="assembly.html#id21">2.5.2.5. 五、实战示例</a></li>
<li class="toctree-l4"><a class="reference internal" href="assembly.html#id24">2.5.2.6. 六、调试与验证</a></li>
<li class="toctree-l4"><a class="reference internal" href="assembly.html#id25">2.5.2.7. 七、总结</a></li>
<li class="toctree-l4"><a class="reference internal" href="assembly.html#id26">2.5.2.8. 以LoongArch为例说明链接脚本</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="library.html">2.6. 一些常用的库函数</a><ul>
<li class="toctree-l3"><a class="reference internal" href="library.html#glibc">2.6.1. GLIBC</a><ul>
<li class="toctree-l4"><a class="reference internal" href="library.html#id2">2.6.1.1. 一、核心功能与作用</a></li>
<li class="toctree-l4"><a class="reference internal" href="library.html#id3">2.6.1.2. 二、架构与实现细节</a></li>
<li class="toctree-l4"><a class="reference internal" href="library.html#id4">2.6.1.3. 三、版本演进与升级风险</a></li>
<li class="toctree-l4"><a class="reference internal" href="library.html#id5">2.6.1.4. 四、与其他运行库的对比</a></li>
<li class="toctree-l4"><a class="reference internal" href="library.html#id6">2.6.1.5. 五、开发与调试工具</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="library.html#musl">2.6.2. MUSL</a><ul>
<li class="toctree-l4"><a class="reference internal" href="library.html#musl-c">2.6.2.1. Musl C 库详解</a></li>
<li class="toctree-l4"><a class="reference internal" href="library.html#id15">2.6.2.2. 总结</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="library.html#memcpy">2.6.3. memcpy</a></li>
<li class="toctree-l3"><a class="reference internal" href="library.html#memmove">2.6.4. memmove</a></li>
<li class="toctree-l3"><a class="reference internal" href="library.html#memset">2.6.5. memset</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../privilege_isa/index.html">3. 特权态指令</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../privilege_isa/csr.html">3.1. CSR寄存器</a></li>
<li class="toctree-l2"><a class="reference internal" href="../privilege_isa/csr.html#id1">3.2. CSR指令</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../privilege_isa/csr.html#csrrd">3.2.1. CSRRD指令</a></li>
<li class="toctree-l3"><a class="reference internal" href="../privilege_isa/csr.html#csrwr">3.2.2. CSRWR指令</a></li>
<li class="toctree-l3"><a class="reference internal" href="../privilege_isa/csr.html#csrxchg">3.2.3. CSRXCHG指令</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../privilege_isa/csr.html#iocsr">3.3. IOCSR指令</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../privilege_isa/csr.html#iocsrrd">3.3.1. IOCSRRD指令</a></li>
<li class="toctree-l3"><a class="reference internal" href="../privilege_isa/csr.html#iocsrwr">3.3.2. IOCSRWR指令</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../privilege_isa/cacop_insn.html">3.4. CPUCFG 指令</a></li>
<li class="toctree-l2"><a class="reference internal" href="../privilege_isa/cacop_insn.html#cacop">3.5. CACOP 指令</a></li>
<li class="toctree-l2"><a class="reference internal" href="../privilege_isa/tlb_insn.html">3.6. TLB 与页表指令</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../privilege_isa/tlb_insn.html#id1">3.6.1. TLB 相关指令</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../privilege_isa/tlb_insn.html#tlbsrch">3.6.1.1. TLBSRCH</a></li>
<li class="toctree-l4"><a class="reference internal" href="../privilege_isa/tlb_insn.html#tlbrd">3.6.1.2. TLBRD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../privilege_isa/tlb_insn.html#tlbwr">3.6.1.3. TLBWR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../privilege_isa/tlb_insn.html#tlbfill">3.6.1.4. TLBFILL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../privilege_isa/tlb_insn.html#tlbclr">3.6.1.5. TLBCLR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../privilege_isa/tlb_insn.html#tlbflush">3.6.1.6. TLBFLUSH</a></li>
<li class="toctree-l4"><a class="reference internal" href="../privilege_isa/tlb_insn.html#invtlb">3.6.1.7. INVTLB</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../privilege_isa/tlb_insn.html#id2">3.6.2. 页表查找指令</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../privilege_isa/tlb_insn.html#lddir">3.6.2.1. LDDIR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../privilege_isa/tlb_insn.html#ldpte">3.6.2.2. LDPTE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../privilege_isa/tlb_insn.html#id3">3.6.3. 应用示例</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../privilege_isa/misc_insn.html">3.7. ERTN指令</a></li>
<li class="toctree-l2"><a class="reference internal" href="../privilege_isa/misc_insn.html#idle">3.8. IDLE指令</a></li>
<li class="toctree-l2"><a class="reference internal" href="../privilege_isa/misc_insn.html#syscall">3.9. SysCALL指令</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mmu/index.html">4. 内存管理</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mmu/tlb_struct.html">4.1. LoongArch的地址管理</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../mmu/tlb_struct.html#id2">4.1.1. 直接地址翻译模式</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mmu/tlb_struct.html#id3">4.1.2. 映射地址翻译模式</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mmu/tlb_struct.html#id4">4.1.3. 存储访问的类型</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mmu/tlb_struct.html#loongarchtlb">4.2. LoongArch的TLB结构</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../mmu/tlb_struct.html#id5">4.2.1. 逻辑组织结构</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mmu/tlb_struct.html#tlb-cpu">4.2.2. TLB的表项（以CPU的视觉）</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mmu/tlb_struct.html#tlb">4.3. TLB的管理</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../mmu/tlb_struct.html#id6">4.3.1. TLB的一些概念区分</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mmu/tlb_struct.html#id7">4.3.2. TLB相关的指令</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mmu/tlb_struct.html#tlbcsr">4.3.3. TLB相关的CSR</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mmu/tlb_struct.html#tlb-excption-handle">4.3.4. TLB相关的例外</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mmu/tlb_struct.html#cputlb">4.3.5. CPU内部TLB查找流程示例</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mmu/dmw.html">4.4. 直接映射翻译模式</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../mmu/dmw.html#csr-dmw-0-3">4.4.1. CSR.DMW[0-3]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mmu/dmw.html#id2">4.4.2. 操作系统中如何使用</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../mmu/dmw.html#dmw">4.4.2.1. DMW的优点</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mmu/dmw.html#id3">4.4.2.2. DMW的缺点</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mmu/dmw.html#id4">4.4.2.3. 代码示例如何在内核中使用</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mmu/tlb_ptw.html">4.5. 多级页表结构</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../mmu/tlb_ptw.html#id2">4.5.1. 设计背景与必要性</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../mmu/tlb_ptw.html#id3">4.5.1.1. 多级页表的结构与层级</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mmu/tlb_ptw.html#id4">4.5.1.2. 地址转换流程</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mmu/tlb_ptw.html#id5">4.5.1.3. 多级页表的优势</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mmu/tlb_ptw.html#id6">4.5.1.4. 优化机制</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mmu/tlb_ptw.html#id7">4.5.1.5. 对比不同架构的页表设计</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../mmu/tlb_ptw.html#loongarch">4.5.2. LoongArch的多级页表结构</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../mmu/tlb_ptw.html#kernel">4.5.2.1. Kernel如何初始化设置多级页表结构</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mmu/tlb_ptw.html#kb">4.5.2.2. 二级页表，4KB页大小</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mmu/tlb_ptw.html#id8">4.5.2.3. 二级页表，16KB页大小</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mmu/tlb_ptw.html#id9">4.5.2.4. 三级页表，4KB页大小</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mmu/tlb_ptw.html#id10">4.5.2.5. 三级页表，16KB页大小</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mmu/tlb_ptw.html#id11">4.5.2.6. 四级页表，4KB页大小</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mmu/tlb_ptw.html#id12">4.5.2.7. 四级页表，16KB页大小</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../mmu/tlb_ptw.html#id13">4.5.3. 内存中的页表表项（Kernel视角）</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../mmu/tlb_ptw.html#id14">4.5.3.1. 基本页表（叶子节点）</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mmu/tlb_ptw.html#id15">4.5.3.2. 大页页表（叶子节点）</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mmu/tlb_ptw.html#no-leaf-pg-entry">4.5.3.3. 中间指向下一级目录的地址的页表(非叶子节点页表)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../mmu/tlb_ptw.html#id17">4.5.4. 页表的遍历</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../mmu/tlb_ptw.html#k">4.5.4.1. 以一个例子4K页为例说明：</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mmu/tlb_ptw.html#m">4.5.4.2. 以一个例子2M页为例说明：</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mmu/tlb_ptw.html#cputlb">4.6. 从内存中的页表表项到CPU中的TLB</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../mmu/tlb_ptw.html#tlbrefill-softeware-ptw">4.6.1. TLBRefill (Softeware PTW)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../mmu/tlb_ptw.html#csr">4.6.1.1. 相关的CSR寄存器</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mmu/tlb_ptw.html#id18">4.6.1.2. 重填示例代码</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mmu/tlb_ptw.html#id19">4.6.1.3. 两级页表的示例代码</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mmu/tlb_ptw.html#three-level-page-table-refill">4.6.1.4. 三级页表的示例代码</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mmu/tlb_ptw.html#id21">4.6.1.5. 四级页表的示例代码</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../mmu/tlb_ptw.html#hardware-ptw">4.6.2. Hardware PTW</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mmu/tlb_ptw.html#id22">4.6.3. 页表的刷新</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../mmu/tlb_ptw.html#id23">4.6.3.1. 页表为什么需要刷新</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mmu/tlb_ptw.html#id24">4.6.3.2. 页表刷新的指令</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mmu/tlb_ptw.html#id25">4.6.3.3. 页表刷新的例子</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mmu/page_table_in_kernel.html">4.7. Kernel与MMU</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../mmu/page_table_in_kernel.html#id1">4.7.1. 地址翻译相关的初始化</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mmu/page_table_in_kernel.html#id2">4.7.2. 如何从直接地址翻译模式到映射地址翻译模式</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mmu/page_table_in_kernel.html#id3">4.7.3. 如何建立虚拟地址到物理地址的映射关系</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mmu/page_table_in_kernel.html#id4">4.7.4. 页表的遍历页表</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mmu/page_table_in_kernel.html#tlb">4.7.5. 情况1. 如果TLB中没有映射</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mmu/page_table_in_kernel.html#v-0">4.7.6. 情况2. 如果页表项的V=0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mmu/page_table_in_kernel.html#d-0">4.7.7. 情况3. 如果写操作页表项D=0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mmu/page_table_in_kernel.html#id5">4.7.8. 情况4. 如果权限不合法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mmu/page_table_in_kernel.html#ptw">4.7.9. 如果使能硬件PTW</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../trap/index.html">5. 中断与异常系统</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../trap/interrupt.html">5.1. 中断</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../trap/interrupt.html#id2">5.1.1. 线中断</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../trap/interrupt.html#ipi">5.1.1.1. 核间中断IPI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../trap/interrupt.html#id3">5.1.1.2. 定时器中断</a></li>
<li class="toctree-l4"><a class="reference internal" href="../trap/interrupt.html#id4">5.1.1.3. 性能计数器中断</a></li>
<li class="toctree-l4"><a class="reference internal" href="../trap/interrupt.html#id5">5.1.1.4. 外部硬中断</a></li>
<li class="toctree-l4"><a class="reference internal" href="../trap/interrupt.html#id6">5.1.1.5. 内部软中断</a></li>
<li class="toctree-l4"><a class="reference internal" href="../trap/interrupt.html#id7">5.1.1.6. 中断号</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../trap/interrupt.html#id8">5.1.2. 消息中断</a></li>
<li class="toctree-l3"><a class="reference internal" href="../trap/interrupt.html#id9">5.1.3. 中断的优先级</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../trap/interrupt.html#id10">5.1.3.1. 线中断的优先级</a></li>
<li class="toctree-l4"><a class="reference internal" href="../trap/interrupt.html#id11">5.1.3.2. 消息中断的优先级</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../trap/interrupt.html#id12">5.1.4. 中断的打开与关闭</a></li>
<li class="toctree-l3"><a class="reference internal" href="../trap/interrupt.html#id13">5.1.5. 中断的入口地址</a></li>
<li class="toctree-l3"><a class="reference internal" href="../trap/interrupt.html#id14">5.1.6. 中断的处理流程</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../trap/exception.html">5.2. 例外</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../trap/exception.html#id2">5.2.1. 例外的优先级</a></li>
<li class="toctree-l3"><a class="reference internal" href="../trap/exception.html#id3">5.2.2. 例外的入口地址</a></li>
<li class="toctree-l3"><a class="reference internal" href="../trap/exception.html#id4">5.2.3. 例外的处理过程</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../trap/exception.html#id5">5.2.3.1. 普通例外的处理过程</a></li>
<li class="toctree-l4"><a class="reference internal" href="../trap/exception.html#tlb">5.2.3.2. TLB 重填例外硬件处理过程</a></li>
<li class="toctree-l4"><a class="reference internal" href="../trap/exception.html#id6">5.2.3.3. 机器错误例外硬件处理过程</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../trap/trap_in_kernel.html">5.3. Kernel与异常</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../trap/trap_in_kernel.html#expection-entry-selection">5.3.1. 异常的入口地址选择</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../trap/trap_in_kernel.html#id2">5.3.1.1. “统一式”的入口地址</a></li>
<li class="toctree-l4"><a class="reference internal" href="../trap/trap_in_kernel.html#id3">5.3.1.2. “分离式”的入口地址</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../trap/trap_in_kernel.html#id4">5.3.2. 异常的初始化</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../trap/trap_in_kernel.html#id5">5.3.2.1. 统一式的初始化</a></li>
<li class="toctree-l4"><a class="reference internal" href="../trap/trap_in_kernel.html#id7">5.3.2.2. 分离式的初始化</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../trap/trap_in_kernel.html#cpu">5.3.3. 异常发生时，CPU做了什么</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../trap/trap_in_kernel.html#id9">5.4. 特殊异常的处理</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../trap/trap_in_kernel.html#id10">5.4.1. 定时器中断</a></li>
<li class="toctree-l3"><a class="reference internal" href="../trap/trap_in_kernel.html#id11">5.4.2. 系统调用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../trap/trap_in_kernel.html#id12">5.4.3. 非对齐访问</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../smp/index.html">6. SMP多核系统</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../smp/smp.html">6.1. SMP与LoongArch</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../smp/smp.html#ipi">6.1.1. IPI中断</a></li>
<li class="toctree-l3"><a class="reference internal" href="../smp/smp.html#id1">6.1.2. 如何通信</a></li>
<li class="toctree-l3"><a class="reference internal" href="../smp/smp.html#id2">6.1.3. 如何初始化</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../smp/smp.html#linuxsmp">6.2. Linux中SMP的处理（与架构相关）</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../abi/index.html">7. 程序二进制接口</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../abi/new_and_old_world.html">7.1. 新旧世界</a></li>
<li class="toctree-l2"><a class="reference internal" href="../abi/new_and_old_world.html#id2">7.2. 旧世界</a></li>
<li class="toctree-l2"><a class="reference internal" href="../abi/new_and_old_world.html#id3">7.3. 新世界</a></li>
<li class="toctree-l2"><a class="reference internal" href="../abi/new_and_old_world.html#id4">7.4. 新旧世界的区分</a></li>
<li class="toctree-l2"><a class="reference internal" href="../abi/abi.html">7.5. ABI 2.0</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../debug/index.html">8. 调试方法与技巧</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../debug/debug_env.html">8.1. LoongArch最小debug环境搭建</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../debug/debug_env.html#linux-ramdisk">8.1.1. 制作Linux RamDisk</a></li>
<li class="toctree-l3"><a class="reference internal" href="../debug/debug_env.html#qemu">8.1.2. 如何在 QEMU 中调试</a></li>
<li class="toctree-l3"><a class="reference internal" href="../debug/debug_env.html#id1">8.1.3. 设置断点</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../debug/debug_gdb.html">8.2. GDB的使用</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../debug/debug_gdb.html#id1">8.2.1. 交叉编译环境中的GDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../debug/debug_gdb.html#id2">8.2.2. 常见的GDB命令示例</a></li>
<li class="toctree-l3"><a class="reference internal" href="../debug/debug_gdb.html#id3">8.2.3. 调试指令常见失效状况</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../platform/index.html">9. 平台相关</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../platform/qemu.html">9.1. QEMU</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../platform/qemu.html#virt">9.1.1. Virt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/qemu.html#id1">9.1.2. 设备</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../platform/3a5000.html">9.2. 3A5000芯片</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../platform/3a5000.html#id1">9.2.1. 芯片参数</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/3a5000.html#id2">9.2.2. 芯片架构</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/3a5000.html#id3">9.2.3. 地址空间</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../platform/3a5000.html#id4">9.2.3.1. 结点间物理地址空间</a></li>
<li class="toctree-l4"><a class="reference internal" href="../platform/3a5000.html#id5">9.2.3.2. 结点内物理地址空间</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../platform/3a6000.html">9.3. 3A6000芯片</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../platform/3a6000.html#id1">9.3.1. 芯片参数</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/3a6000.html#id2">9.3.2. 芯片架构</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../platform/2k3000.html">9.4. 2k3000芯片</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../platform/2k3000.html#id1">9.4.1. 芯片参数</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../platform/2k1000la.html">9.5. 2k1000LA芯片</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../platform/2k1000la.html#id1">9.5.1. 芯片参数</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/2k1000la.html#id2">9.5.2. 芯片架构</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/2k1000la.html#id3">9.5.3. 芯片功能</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/2k1000la.html#id4">9.5.4. 地址空间</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../platform/2k0500.html">9.6. 2k0500芯片</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../platform/2k0500.html#id1">9.6.1. 芯片架构</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/2k0500.html#id2">9.6.2. 芯片架构</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/2k0500.html#id3">9.6.3. 芯片架构</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/2k0500.html#id4">9.6.4. 芯片功能</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/2k0500.html#id5">9.6.5. 地址空间</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/2k0500.html#id6">9.6.6. 中断配置</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../platform/2k0300.html">9.7. 2k0300芯片</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../platform/2k0300.html#id1">9.7.1. 芯片参数</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/2k0300.html#id2">9.7.2. 芯片架构</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/2k0300.html#id3">9.7.3. 芯片功能</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/2k0300.html#id4">9.7.4. 地址空间</a></li>
<li class="toctree-l3"><a class="reference internal" href="../platform/2k0300.html#id5">9.7.5. 中断配置及路由</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../simd/index.html">10. 高级应用：SMID与向量指令</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../simd/todo.html">10.1. TODO</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../virt/index.html">11. 高级应用：LVZ与虚拟化扩展</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../virt/todo.html">11.1. TODO</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">12. FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq/faq-25.html">12.1. FAQ-25</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">龙芯实验室文档</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">2. </span>工具链</a></li>
      <li class="breadcrumb-item active"><span class="section-number">2.2. </span>Binutils</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="binutils">
<h1><span class="section-number">2.2. </span>Binutils<a class="headerlink" href="#binutils" title="Link to this heading"></a></h1>
<p>GNU Binutils 是 GNU 项目下的<strong>二进制工具集合</strong>，用于<strong>处理、分析和转换二进制文件</strong>
（如目标文件、可执行文件、库文件等），是 Linux/Unix 系统开发流程中的核心工具链组件之一。它涵盖了从汇编、链接到二进制文件分析的完整环节，
支撑着 GCC 等编译器的底层运作，也是嵌入式开发、逆向工程、性能调优等场景的基础工具。</p>
<section id="gnu-binutils">
<h2><span class="section-number">2.2.1. </span>GNU Binutils的相关说明<a class="headerlink" href="#gnu-binutils" title="Link to this heading"></a></h2>
<section id="id1">
<h3><span class="section-number">2.2.1.1. </span><strong>核心定位与背景</strong><a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<p>GNU Binutils 的设计目标是<strong>为 GNU 系统提供二进制文件处理能力</strong>，最初是为了配合 GCC（GNU 编译器集合）使用，
解决目标文件的汇编、链接、符号管理等问题。随着发展，其功能逐渐扩展到二进制文件分析、转换、优化等多个领域，
成为 Linux 开发环境中不可或缺的工具集。</p>
<p>Binutils 的核心依赖是<strong>BFD（Binary File Descriptor）库</strong>，该库提供了统一的接口来处理多种二进制文件格式（如 ELF、COFF、a.out 等），使得 Binutils 中的工具能跨格式工作。</p>
</section>
<section id="id2">
<h3><span class="section-number">2.2.1.2. </span><strong>重要组成部分与功能</strong><a class="headerlink" href="#id2" title="Link to this heading"></a></h3>
<p>GNU Binutils 包含十余种工具，可分为<strong>核心工具</strong>（汇编、链接）、<strong>辅助工具</strong>（文件处理、符号分析）、
<strong>跨平台工具</strong>（Windows 兼容）三大类，以下是关键工具的详细说明：</p>
<section id="id3">
<h4><span class="section-number">2.2.1.2.1. </span><strong>核心工具：汇编与链接</strong><a class="headerlink" href="#id3" title="Link to this heading"></a></h4>
<ul>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">as</span></code>（GNU 汇编器）</strong>：<br />
将汇编语言源文件（如 <code class="docutils literal notranslate"><span class="pre">.s</span></code>、<code class="docutils literal notranslate"><span class="pre">.asm</span></code>）转换为<strong>目标文件</strong>（<code class="docutils literal notranslate"><span class="pre">.o</span></code>），是 GCC 编译流程中的第二步（第一步是预处理，第三步是链接）。
<code class="docutils literal notranslate"><span class="pre">as</span></code> 支持多种架构（x86、ARM、RISC-V、LoongArch 等），其输出为目标文件中的机器码，供链接器使用。</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">ld</span></code>（GNU 链接器）</strong>：<br />
将多个目标文件（<code class="docutils literal notranslate"><span class="pre">.o</span></code>）或库文件（<code class="docutils literal notranslate"><span class="pre">.a</span></code>、<code class="docutils literal notranslate"><span class="pre">.so</span></code>）组合成<strong>可执行文件</strong>或<strong>共享库</strong>。
链接器的主要作用是解决符号引用（如函数调用、全局变量访问），分配内存地址，并处理重定位（Relocation）。
<code class="docutils literal notranslate"><span class="pre">ld</span></code> 支持自定义链接脚本（Link Script），用于控制输出文件的布局（如代码段、数据段的位置）。</p>
<p>后续章节我们会详细的介绍使用的例子。</p>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">gold</span></code>（快速链接器）</strong>：<br />
<code class="docutils literal notranslate"><span class="pre">ld</span></code> 的替代工具，专为<strong>ELF 格式</strong>（Linux 下的标准可执行文件格式）设计，链接速度比传统 <code class="docutils literal notranslate"><span class="pre">ld</span></code> 快数倍。它优化了符号解析和数据布局，适合大型项目（如内核、浏览器）的快速构建，但目前仍处于 beta 测试阶段。</p></li>
</ul>
</section>
<section id="id4">
<h4><span class="section-number">2.2.1.2.2. </span><strong>辅助工具：二进制文件分析与处理</strong><a class="headerlink" href="#id4" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">objdump</span></code>（目标文件信息显示）</strong>：<br />
显示目标文件或可执行文件的详细信息，包括<strong>反汇编代码</strong>、<strong>段结构</strong>（如 <code class="docutils literal notranslate"><span class="pre">.text</span></code>、<code class="docutils literal notranslate"><span class="pre">.data</span></code>、<code class="docutils literal notranslate"><span class="pre">.bss</span></code>）、
<strong>符号表</strong>、<strong>重定位条目</strong>等。
<code class="docutils literal notranslate"><span class="pre">objdump</span></code> 是逆向工程和调试的常用工具，例如通过 <code class="docutils literal notranslate"><span class="pre">-d</span></code> 选项可查看程序的机器码对应的汇编指令。</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">nm</span></code>（符号表列举）</strong>：<br />
列出目标文件或库文件中的<strong>符号信息</strong>（如函数名、全局变量名），包括符号的地址、类型
（如 <code class="docutils literal notranslate"><span class="pre">T</span></code> 表示代码段符号、<code class="docutils literal notranslate"><span class="pre">D</span></code> 表示数据段符号）。<code class="docutils literal notranslate"><span class="pre">nm</span></code> 常用于定位未定义符号
（如链接错误中的 <code class="docutils literal notranslate"><span class="pre">undefined</span> <span class="pre">reference</span></code>）或分析库文件的导出符号。</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">objcopy</span></code>（目标文件转换）</strong>：<br />
将目标文件从一种格式转换为另一种格式（如 ELF 转二进制、二进制转 S-record），
或修改目标文件的段属性（如将 <code class="docutils literal notranslate"><span class="pre">.text</span></code> 段设置为只读）。例如，嵌入式开发中常用 <code class="docutils literal notranslate"><span class="pre">objcopy</span></code>
将 ELF 可执行文件转换为裸二进制文件（<code class="docutils literal notranslate"><span class="pre">.bin</span></code>），用于烧录到 Flash 中。</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">readelf</span></code>（ELF 文件信息显示）</strong>：<br />
专门用于显示<strong>ELF 格式</strong>文件的信息（如 ELF 头、程序头表、节头表、符号表），比 <code class="docutils literal notranslate"><span class="pre">objdump</span></code> 更聚焦于 ELF 结构的细节。
<code class="docutils literal notranslate"><span class="pre">readelf</span></code> 常用于分析 ELF 文件的布局（如代码段的位置、动态链接信息），
是理解 Linux 可执行文件格式的关键工具。</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">strip</span></code>（符号剥离）</strong>：<br />
从目标文件或可执行文件中<strong>移除符号表、调试信息</strong>（如 <code class="docutils literal notranslate"><span class="pre">.debug_*</span></code> 段），减小文件体积。<code class="docutils literal notranslate"><span class="pre">strip</span></code> 常用于发布版本的程序，避免泄露内部符号信息，或提高加载速度。</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">ar</span></code>（归档工具）</strong>：<br />
创建、修改或提取<strong>静态库</strong>（<code class="docutils literal notranslate"><span class="pre">.a</span></code> 文件），静态库是多个目标文件的归档集合。<br />
例如，<code class="docutils literal notranslate"><span class="pre">ar</span> <span class="pre">rv</span> <span class="pre">libfoo.a</span> <span class="pre">foo1.o</span> <span class="pre">foo2.o</span></code> 可将 <code class="docutils literal notranslate"><span class="pre">foo1.o</span></code> 和 <code class="docutils literal notranslate"><span class="pre">foo2.o</span></code> 打包成 <code class="docutils literal notranslate"><span class="pre">libfoo.a</span></code>，供链接器使用。</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">ranlib</span></code>（归档索引生成）</strong>：<br />
为静态库生成<strong>符号索引</strong>（<code class="docutils literal notranslate"><span class="pre">.symtab</span></code> 段），加速链接器对静态库的符号查找。
<code class="docutils literal notranslate"><span class="pre">ranlib</span></code> 通常与 <code class="docutils literal notranslate"><span class="pre">ar</span></code> 配合使用，例如 <code class="docutils literal notranslate"><span class="pre">ar</span> <span class="pre">rv</span> <span class="pre">libfoo.a</span> <span class="pre">foo1.o</span> <span class="pre">&amp;&amp;</span> <span class="pre">ranlib</span> <span class="pre">libfoo.a</span></code>。</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">addr2line</span></code>（地址转行号）</strong>：<br />
将程序中的<strong>虚拟地址</strong>转换为<strong>源文件行号</strong>，常用于调试（如 coredump 分析）。<br />
例如，<code class="docutils literal notranslate"><span class="pre">addr2line</span> <span class="pre">-e</span> <span class="pre">a.out</span> <span class="pre">0x400520</span></code> 可显示地址 <code class="docutils literal notranslate"><span class="pre">0x400520</span></code> 对应的源文件和行号。</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">c++filt</span></code>（C++ 符号反混淆）</strong>：<br />
将 C++ 编译器生成的<strong>混淆符号</strong>（如 <code class="docutils literal notranslate"><span class="pre">_ZN3Foo3barEv</span></code>）
转换为人类可读的形式（如 <code class="docutils literal notranslate"><span class="pre">Foo::bar()</span></code>），便于分析 C++ 程序的符号表。</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">size</span></code>（段大小列举）</strong>：<br />
列出目标文件或库文件的<strong>段大小</strong>（如 <code class="docutils literal notranslate"><span class="pre">.text</span></code>、<code class="docutils literal notranslate"><span class="pre">.data</span></code>、<code class="docutils literal notranslate"><span class="pre">.bss</span></code>），帮助开发者了解程序的内存占用情况。<br />
例如，<code class="docutils literal notranslate"><span class="pre">size</span> <span class="pre">a.out</span></code> 可显示各段的大小之和。</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">strings</span></code>（可打印字符串列举）</strong>：<br />
列出文件中的<strong>可打印字符串</strong>（如 ASCII 字符串），常用于分析二进制文件中的隐藏信息（如错误信息、版权信息）。</p></li>
</ul>
</section>
<section id="windows">
<h4><span class="section-number">2.2.1.2.3. </span><strong>跨平台工具：Windows 兼容</strong><a class="headerlink" href="#windows" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">dlltool</span></code>（DLL 工具）</strong>：<br />
创建 Windows 动态链接库（<code class="docutils literal notranslate"><span class="pre">.dll</span></code>）的依赖文件（如 <code class="docutils literal notranslate"><span class="pre">.lib</span></code> 导入库），或生成 DLL 的导出表。<br />
例如，<code class="docutils literal notranslate"><span class="pre">dlltool</span> <span class="pre">-e</span> <span class="pre">exports.o</span> <span class="pre">-l</span> <span class="pre">dll.lib</span> <span class="pre">dll.o</span></code> 可从 <code class="docutils literal notranslate"><span class="pre">dll.o</span></code> 生成 <code class="docutils literal notranslate"><span class="pre">dll.lib</span></code>，供 Windows 程序链接使用。</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">windmc</span></code>（Windows 消息编译器）</strong>：<br />
编译 Windows 消息资源文件（<code class="docutils literal notranslate"><span class="pre">.mc</span></code>），生成消息表和资源头文件，用于国际化（i18n）开发。</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">windres</span></code>（Windows 资源编译器）</strong>：<br />
编译 Windows 资源文件（<code class="docutils literal notranslate"><span class="pre">.rc</span></code>），生成目标文件（<code class="docutils literal notranslate"><span class="pre">.o</span></code>），用于嵌入图标、对话框等资源到可执行文件中。</p></li>
</ul>
</section>
</section>
<section id="id5">
<h3><span class="section-number">2.2.1.3. </span><strong>应用场景</strong><a class="headerlink" href="#id5" title="Link to this heading"></a></h3>
<p>GNU Binutils 的应用场景覆盖<strong>软件开发的全流程</strong>，以下是典型案例：</p>
<ol class="arabic simple">
<li><p><strong>嵌入式开发</strong>：<br />
嵌入式设备的资源有限（如 ROM/RAM 小），需用 <code class="docutils literal notranslate"><span class="pre">objcopy</span></code> 将 ELF 可执行文件转换为裸二进制文件（<code class="docutils literal notranslate"><span class="pre">.bin</span></code>），
再用烧录工具写入 Flash；用 <code class="docutils literal notranslate"><span class="pre">nm</span></code> 分析静态库的符号，确保没有冗余代码。</p></li>
<li><p><strong>逆向工程</strong>：<br />
用 <code class="docutils literal notranslate"><span class="pre">objdump</span></code> 反汇编可执行文件，分析其机器码逻辑；用 <code class="docutils literal notranslate"><span class="pre">readelf</span></code> 查看 ELF 文件的动态链接信息（如依赖的共享库）；
用 <code class="docutils literal notranslate"><span class="pre">strings</span></code> 查找二进制文件中的敏感字符串（如密码、URL）。</p></li>
<li><p><strong>性能调优</strong>：<br />
用 <code class="docutils literal notranslate"><span class="pre">gprof</span></code>（性能分析工具）分析程序的调用图，找出性能瓶颈；用 <code class="docutils literal notranslate"><span class="pre">strip</span></code> 移除调试信息，减小程序体积，提高加载速度。</p></li>
<li><p><strong>库开发</strong>：<br />
用 <code class="docutils literal notranslate"><span class="pre">ar</span></code> 和 <code class="docutils literal notranslate"><span class="pre">ranlib</span></code> 创建静态库（<code class="docutils literal notranslate"><span class="pre">.a</span></code>），用 <code class="docutils literal notranslate"><span class="pre">ld</span></code> 生成共享库（<code class="docutils literal notranslate"><span class="pre">.so</span></code>）；用 <code class="docutils literal notranslate"><span class="pre">nm</span></code> 检查库的导出符号，确保符合 API 设计规范。</p></li>
</ol>
<p>下面我们针对不同的工具进行详细的案例说明使用。</p>
</section>
</section>
<section id="ld">
<h2><span class="section-number">2.2.2. </span>ld链接器<a class="headerlink" href="#ld" title="Link to this heading"></a></h2>
<p>链接器就是将多个目标文件（<code class="docutils literal notranslate"><span class="pre">.o</span></code>）或库文件（<code class="docutils literal notranslate"><span class="pre">.a</span></code>、<code class="docutils literal notranslate"><span class="pre">.so</span></code>）组合成<strong>可执行文件</strong>或<strong>共享库</strong>。
链接器的主要作用是解决符号引用（如函数调用、全局变量访问），分配内存地址，并处理重定位（Relocation）。
<code class="docutils literal notranslate"><span class="pre">ld</span></code> 支持自定义链接脚本（Link Script），用于控制输出文件的布局（如代码段、数据段的位置）。</p>
<p>例如： 我们先有一个main.c 和 hello.c</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// main.c </span>
<span class="kt">void</span><span class="w"> </span><span class="nf">call_say_hello</span><span class="p">();</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">exit</span><span class="p">();</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">	</span><span class="n">call_say_hello</span><span class="p">();</span>
<span class="w">	</span><span class="n">exit</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">_start</span><span class="p">(){</span>
<span class="w">	</span><span class="n">main</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// hello.c </span>
<span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;hello LoongArch</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span>

<span class="kt">void</span><span class="w"> </span><span class="nf">call_say_hello</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">	</span><span class="n">__asm__</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="s">&quot;li.d $a7, 64   </span><span class="se">\t\n</span><span class="s">&quot;</span>
<span class="w">        </span><span class="s">&quot;li.d $a0, 1   </span><span class="se">\t\n</span><span class="s">&quot;</span>
<span class="w">        </span><span class="s">&quot;move $a1, %[wptr]   </span><span class="se">\t\n</span><span class="s">&quot;</span>
<span class="w">        </span><span class="s">&quot;li.d $a2, %[count]   </span><span class="se">\t\n</span><span class="s">&quot;</span>
<span class="w">        </span><span class="s">&quot;syscall 0x0&quot;</span>
<span class="w">        </span><span class="o">:</span><span class="w">   </span><span class="cm">/*Output*/</span>
<span class="w">        </span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="n">wptr</span><span class="p">]</span><span class="w"> </span><span class="s">&quot;r&quot;</span><span class="w"> </span><span class="p">(</span><span class="n">ptr</span><span class="p">),</span><span class="w">  </span><span class="cm">/*Input*/</span>
<span class="w">          </span><span class="p">[</span><span class="n">count</span><span class="p">]</span><span class="w"> </span><span class="s">&quot;I&quot;</span><span class="w"> </span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
<span class="w">        </span><span class="o">:</span><span class="s">&quot;memory&quot;</span>
<span class="w">	</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">exit</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">	</span><span class="n">__asm__</span><span class="p">(</span>
<span class="w">        </span><span class="s">&quot;li.d $a7, 93 </span><span class="se">\t\n</span><span class="s">&quot;</span>
<span class="w">        </span><span class="s">&quot;li.d $a0, 0 </span><span class="se">\t\n</span><span class="s">&quot;</span>
<span class="w">        </span><span class="s">&quot;syscall 0x0 </span><span class="se">\t\n</span><span class="s">&quot;</span>
<span class="w">        </span><span class="o">:::</span><span class="s">&quot;memory&quot;</span>
<span class="w">	</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>其中hello.c中的内嵌汇编，我们在后面的章节会详细的介绍。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>shell&gt;<span class="w"> </span>loongarch64-linux-musl-gcc<span class="w"> </span>main.c<span class="w"> </span>-o<span class="w"> </span>main.o<span class="w"> </span>-c
shell&gt;<span class="w"> </span>loongarch64-linux-musl-gcc<span class="w"> </span>hello.c<span class="w"> </span>-o<span class="w"> </span>hello.o<span class="w"> </span>-c
shell&gt;<span class="w"> </span>loongarch64-linux-musl-ld<span class="w"> </span>main.o<span class="w"> </span>hello.o<span class="w"> </span>-o<span class="w"> </span>hello
</pre></div>
</div>
<p>我们使用<code class="docutils literal notranslate"><span class="pre">file</span> <span class="pre">hello</span></code>可以查看生成ELF的信息</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>shell&gt;<span class="w"> </span>file<span class="w"> </span>hello
hello:<span class="w"> </span>ELF<span class="w"> </span><span class="m">64</span>-bit<span class="w"> </span>LSB<span class="w"> </span>executable,<span class="w"> </span>LoongArch,<span class="w"> </span>version<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">(</span>SYSV<span class="o">)</span>,<span class="w"> </span>statically<span class="w"> </span>linked,<span class="w"> </span>not<span class="w"> </span>stripped
</pre></div>
</div>
<p>然后可以执行</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>shell&gt;<span class="w"> </span>./hello
Hello<span class="w"> </span>LoongArch!
</pre></div>
</div>
<section id="id6">
<h3><span class="section-number">2.2.2.1. </span>LD的参数说明<a class="headerlink" href="#id6" title="Link to this heading"></a></h3>
<p>下面我们详细说下ld链接器常使用的命令说明：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ld<span class="w"> </span>-o<span class="w"> </span>output<span class="w"> </span>hello.o<span class="w"> </span>-lc
</pre></div>
</div>
<p>将hello.o文件，生成output文件，hello.o中用到了C库中的函数，因此需要指定C库<code class="docutils literal notranslate"><span class="pre">-lc</span></code></p>
<!-- TODO: 什么是静态链接和动态链接 -->
<p>具体的参数如下说明：</p>
<hr class="docutils" />
<p>-e entry 或者
–entry=entry:
使用entry显式的作为程序的入口地址，而不是使用默认的地址。
在LoongArch中默认的地址是<code class="docutils literal notranslate"><span class="pre">0000000120000000</span></code>
默认的输入数字是按照十进制来输入，比如<code class="docutils literal notranslate"><span class="pre">--entry=10000</span></code>是指十进制的10000。
如果想用十六进制或者八进制，需要使用相应的前缀。
比如：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>--entry<span class="o">=</span>0x10000<span class="w"> </span><span class="c1">#指的是16进制的0x10000</span>
--entry<span class="o">=</span><span class="m">010000</span><span class="w">  </span><span class="c1">#指的是8进制的10000</span>
</pre></div>
</div>
<hr class="docutils" />
<p>-l namespec 或者
–library=namespec:
增加一个.a或者.so按照namespec指定的列表。典型的通过库搜索路劲，去查找libnamespec.a或者libnamespec.so文件</p>
<hr class="docutils" />
<p>-L searchdir
–library-path=searchdir
Add path searchdir to the list of paths that ld will search for archive libraries and ld control scripts. You may use this option any number of times. The directories are searched in the order in which they are specified on the command line. Directories specified on the command line are searched before the default directories. All -L options apply to all -l options, regardless of the order in which the options appear. -L options do not affect how ld searches for a linker script unless -T option is specified.</p>
<hr class="docutils" />
<p>-M
–print-map
打印在链接过程中，指定符号的内存排布</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>```bash
loongarch64-linux-musl-ld main.o hello.o -o hello -M=link.map
```

```
There are no discarded input sections
Memory Configuration
Name             Origin             Length             Attributes
*default*        0x0000000000000000 0xffffffffffffffff
Linker script and memory map
LOAD main.o
LOAD hello.o
                [!provide]                        PROVIDE (__executable_start = SEGMENT_START (&quot;text-segment&quot;, 0x120000000))
            0x00000001200000e8                . = (SEGMENT_START (&quot;text-segment&quot;, 0x120000000) + SIZEOF_HEADERS)
.note.gnu.build-id
 *(.note.gnu.build-id)

 .text           0x00000001200000e8       0xb4
 *(.text.unlikely .text.*_unlikely .text.unlikely.*)
 *(.text.exit .text.exit.*)
 *(.text.startup .text.startup.*)
 *(.text.hot .text.hot.*)
 *(SORT_BY_NAME(.text.sorted.*))
 *(.text .stub .text.* .gnu.linkonce.t.*)
 .text          0x00000001200000e8       0x54 main.o
                0x00000001200000e8                main
                0x0000000120000114                _start
 .text          0x000000012000013c       0x60 hello.o
                0x000000012000013c                call_say_hello
                0x0000000120000174                exit
 *(.gnu.warning)
```
</pre></div>
</div>
<!-- https://www.sourceware.org/binutils/docs/ld.html -->
<!-- ## as
将汇编语言源文件（如 `.s`、`.asm`）转换为**目标文件**（`.o`），是 GCC 编译流程中的第二步（第一步是预处理，第三步是链接）。
  `as` 支持多种架构（x86、ARM、RISC-V、LoongArch 等），其输出为目标文件中的机器码，供链接器使用。

还是以上面的main.c 和 helloc
```bash
loongarch64-linux-musl-as test_main.S -o test_main.o

/home/airxs/local/loongarch64-linux-musl-gcc-15.2.0/bin/../lib/gcc/loongarch64-linux-musl/15.2.0/../../../../loongarch64-linux-musl/bin/as -v --traditional-format -mabi=lp64d -mrelax -o /tmp/ccPWOiX2.o /tmp/cc52QviI.s


```

### 常用的参数说明

---
-mabi=abi:
	指定使用哪一个abi，在LoongArch上，常见的有``lp64s``, ``lp64d``

 -->
</section>
</section>
<section id="readelf">
<h2><span class="section-number">2.2.3. </span>如何正确的使用readelf<a class="headerlink" href="#readelf" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">readelf</span></code> 是 Linux 下用于分析 ELF（Executable and Linkable Format）格式文件的核心工具，能够显示 ELF 文件的头部信息、节区结构、符号表、重定位信息等。以下是其常用用法及关键选项解析：</p>
<hr class="docutils" />
<section id="id7">
<h3><span class="section-number">2.2.3.1. </span>基础用法与核心选项<a class="headerlink" href="#id7" title="Link to this heading"></a></h3>
<section id="id8">
<h4><span class="section-number">2.2.3.1.1. </span>查看全部信息<a class="headerlink" href="#id8" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>readelf<span class="w"> </span>-a<span class="w"> </span>&lt;elf文件&gt;
</pre></div>
</div>
<ul class="simple">
<li><p><strong>等效选项</strong>：<code class="docutils literal notranslate"><span class="pre">-h</span> <span class="pre">-l</span> <span class="pre">-S</span> <span class="pre">-s</span> <span class="pre">-r</span> <span class="pre">-d</span> <span class="pre">-V</span> <span class="pre">-A</span> <span class="pre">-I</span></code></p></li>
<li><p><strong>作用</strong>：综合显示文件头、程序头、节头、符号表、重定位表等所有关键信息。</p></li>
<li><p><strong>适用场景</strong>：快速全面分析未知 ELF 文件结构。</p></li>
</ul>
</section>
<section id="elf">
<h4><span class="section-number">2.2.3.1.2. </span>查看 ELF 文件头<a class="headerlink" href="#elf" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>readelf<span class="w"> </span>-h<span class="w"> </span>&lt;elf文件&gt;
</pre></div>
</div>
<ul>
<li><p><strong>关键字段</strong>：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Magic</span></code>：ELF 文件标识（<code class="docutils literal notranslate"><span class="pre">0x7F</span> <span class="pre">45</span> <span class="pre">4C</span> <span class="pre">46</span></code>）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Class</span></code>：32 位（<code class="docutils literal notranslate"><span class="pre">ELF32</span></code>）或 64 位（<code class="docutils literal notranslate"><span class="pre">ELF64</span></code>）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Machine</span></code>：目标架构（如 <code class="docutils literal notranslate"><span class="pre">Intel</span> <span class="pre">80386</span></code>、<code class="docutils literal notranslate"><span class="pre">ARM</span></code>）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Entry</span> <span class="pre">point</span> <span class="pre">address</span></code>：程序入口地址。</p></li>
</ul>
</li>
<li><p><strong>示例输出片段</strong>：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ELF Header:
Magic:   7f 45 4c 46 02 01 01 00 00 00 00 00 00 00 00 00 
Class:                             ELF64
Data:                              2&#39;s complement, little endian
Version:                           1 (current)
OS/ABI:                            UNIX - System V
ABI Version:                       0
Type:                              EXEC (Executable file)
Machine:                           LoongArch
Version:                           0x1
Entry point address:               0x120000540
Start of program headers:          64 (bytes into file)
Start of section headers:          67672 (bytes into file)
Flags:                             0x43, DOUBLE-FLOAT, OBJ-v1
Size of this header:               64 (bytes)
Size of program headers:           56 (bytes)
Number of program headers:         8
Size of section headers:           64 (bytes)
Number of section headers:         24
Section header string table index: 23
</pre></div>
</div>
</li>
</ul>
</section>
<section id="sections">
<h4><span class="section-number">2.2.3.1.3. </span>查看节区头表（Sections）<a class="headerlink" href="#sections" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>readelf<span class="w"> </span>-S<span class="w"> </span>&lt;elf文件&gt;
</pre></div>
</div>
<ul>
<li><p><strong>输出内容</strong>：节区名称、类型、大小、地址、权限等。</p></li>
<li><p><strong>关键节区类型</strong>：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.text</span></code>：代码段（可执行指令）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.data</span></code>：已初始化全局变量。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.bss</span></code>：未初始化全局变量。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.debug_info</span></code>：调试信息。</p></li>
</ul>
</li>
<li><p><strong>示例</strong>：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>There are 24 section headers, starting at offset 0x10858:
  Section Headers:
    [Nr] Name              Type             Address           Offset
         Size              EntSize          Flags  Link  Info  Align
    [ 0]                   NULL             0000000000000000  00000000
         0000000000000000  0000000000000000           0     0     0
    [ 1] .interp           PROGBITS         0000000120000200  00000200
         000000000000001e  0000000000000000   A       0     0     1
    [ 2] .hash             HASH             0000000120000220  00000220
         0000000000000038  0000000000000004   A       4     0     8
    [ 3] .gnu.hash         GNU_HASH         0000000120000258  00000258
         000000000000001c  0000000000000000   A       4     0     8
    [ 4] .dynsym           DYNSYM           0000000120000278  00000278
         00000000000000d8  0000000000000018   A       5     1     8
    [ 5] .dynstr           STRTAB           0000000120000350  00000350
         0000000000000090  0000000000000000   A       0     0     1
    [ 6] .rela.dyn         RELA             00000001200003e0  000003e0
         0000000000000090  0000000000000018   A       4     0     8
    [ 7] .rela.plt         RELA             0000000120000470  00000470
         0000000000000060  0000000000000018  AI       4    17     8
    [ 8] .plt              PROGBITS         00000001200004d0  000004d0
         0000000000000060  0000000000000010  AX       0     0     16
    [ 9] .text             PROGBITS         0000000120000540  00000540
         0000000000000200  0000000000000000  AX       0     0     32
    [10] .rodata           PROGBITS         0000000120000740  00000740
         000000000000000b  0000000000000000   A       0     0     8
    [11] .eh_frame_hdr     PROGBITS         000000012000074c  0000074c
         0000000000000014  0000000000000000   A       0     0     4
    [12] .eh_frame         PROGBITS         0000000120000760  00000760
         000000000000003c  0000000000000000   A       0     0     8
    [13] .init_array       INIT_ARRAY       000000012001fdf0  0000fdf0
         0000000000000008  0000000000000008  WA       0     0     8
    [14] .fini_array       FINI_ARRAY       000000012001fdf8  0000fdf8
         0000000000000008  0000000000000008  WA       0     0     8
    [15] .dynamic          DYNAMIC          000000012001fe00  0000fe00
         00000000000001b0  0000000000000010  WA       5     0     8
    [16] .got              PROGBITS         000000012001ffb0  0000ffb0
         0000000000000040  0000000000000008  WA       0     0     8
    [17] .got.plt          PROGBITS         000000012001fff0  0000fff0
         0000000000000030  0000000000000008  WA       0     0     8
    [18] .sdata            PROGBITS         0000000120020020  00010020
         0000000000000008  0000000000000000  WA       0     0     8
    [19] .bss              NOBITS           0000000120020028  00010028
         0000000000000038  0000000000000000  WA       0     0     8
    [20] .comment          PROGBITS         0000000000000000  00010028
         0000000000000012  0000000000000001  MS       0     0     1
    [21] .symtab           SYMTAB           0000000000000000  00010040
         0000000000000570  0000000000000018          22    42     8
    [22] .strtab           STRTAB           0000000000000000  000105b0
         00000000000001ed  0000000000000000           0     0     1
    [23] .shstrtab         STRTAB           0000000000000000  0001079d
         00000000000000bb  0000000000000000           0     0     1
  Key to Flags:
    W (write), A (alloc), X (execute), M (merge), S (strings), I (info),
    L (link order), O (extra OS processing required), G (group), T (TLS),
    C (compressed), x (unknown), o (OS specific), E (exclude),
    D (mbind), p (processor specific)
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id9">
<h4><span class="section-number">2.2.3.1.4. </span>查看符号表<a class="headerlink" href="#id9" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>readelf<span class="w"> </span>-s<span class="w"> </span>&lt;elf文件&gt;
</pre></div>
</div>
<ul>
<li><p><strong>输出内容</strong>：符号名称、地址、大小、绑定类型（如 <code class="docutils literal notranslate"><span class="pre">GLOBAL</span></code>、<code class="docutils literal notranslate"><span class="pre">STATIC</span></code>）。</p></li>
<li><p><strong>选项扩展</strong>：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--dyn-syms</span></code>：显示动态符号表（动态链接库相关）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--use-dynamic</span></code>：优先使用动态符号表而非静态符号表。</p></li>
</ul>
</li>
<li><p><strong>示例</strong>：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Symbol table &#39;.symtab&#39; contains 16 entries:
 Num:    Value          Size Type    Bind   Vis      Ndx Name
   0: 0000000000000000     0 NOTYPE  LOCAL  DEFAULT  UND 
   1: 00000001200000e8     0 SECTION LOCAL  DEFAULT    1 .text
   2: 00000001200001a0     0 SECTION LOCAL  DEFAULT    2 .rodata
   3: 00000001200001b8     0 SECTION LOCAL  DEFAULT    3 .eh_frame
   4: 0000000120010000     0 SECTION LOCAL  DEFAULT    4 .data
   5: 0000000000000000     0 SECTION LOCAL  DEFAULT    5 .comment
   6: 0000000000000000     0 FILE    LOCAL  DEFAULT  ABS main.c
   7: 0000000000000000     0 FILE    LOCAL  DEFAULT  ABS hello.c
   8: 0000000120010000     8 OBJECT  GLOBAL DEFAULT    4 ptr
   9: 000000012000013c    56 FUNC    GLOBAL DEFAULT    1 call_say_hello
  10: 0000000120000114    40 FUNC    GLOBAL DEFAULT    1 _start
  11: 0000000120010008     0 NOTYPE  GLOBAL DEFAULT    4 __bss_start
  12: 00000001200000e8    44 FUNC    GLOBAL DEFAULT    1 main
  13: 0000000120010008     0 NOTYPE  GLOBAL DEFAULT    4 _edata
  14: 0000000120010008     0 NOTYPE  GLOBAL DEFAULT    4 _end
  15: 0000000120000174    40 FUNC    GLOBAL DEFAULT    1 exit
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id10">
<h4><span class="section-number">2.2.3.1.5. </span>5. <strong>查看重定位信息</strong><a class="headerlink" href="#id10" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>readelf<span class="w"> </span>-r<span class="w"> </span>&lt;elf文件&gt;
</pre></div>
</div>
<ul>
<li><p><strong>作用</strong>：显示程序中需要重定位的符号地址（如未定义函数或变量的占位符）。</p></li>
<li><p><strong>典型场景</strong>：调试链接错误（如 <code class="docutils literal notranslate"><span class="pre">undefined</span> <span class="pre">reference</span></code>）。</p></li>
<li><p>示例：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>  Relocation section &#39;.rela.text&#39; at offset 0x328 contains 4 entries:
    Offset          Info           Type           Sym. Value    Sym. Name + Addend
  00000000000c  001000000047 R_LARCH_PCALA_HI2 0000000000000000 ptr + 0
  00000000000c  000000000064 R_LARCH_RELAX                        0
  000000000010  001000000048 R_LARCH_PCALA_LO1 0000000000000000 ptr + 0
  000000000010  000000000064 R_LARCH_RELAX                        0
  
  Relocation section &#39;.rela.data&#39; at offset 0x388 contains 1 entry:
    Offset          Info           Type           Sym. Value    Sym. Name + Addend
  000000000000  000d00000002 R_LARCH_64        0000000000000000 .LC0 + 0
  
  Relocation section &#39;.rela.eh_frame&#39; at offset 0x3a0 contains 8 entries:
    Offset          Info           Type           Sym. Value    Sym. Name + Addend
  00000000001c  000600000063 R_LARCH_32_PCREL  0000000000000000 L0^A + 0
  000000000020  000900000032 R_LARCH_ADD32     000000000000003c L0^A + 0
  000000000020  000600000037 R_LARCH_SUB32     0000000000000000 L0^A + 0
  00000000002f  000800000069 R_LARCH_ADD6      0000000000000034 L0^A + 0
  00000000002f  00070000006a R_LARCH_SUB6      000000000000000c L0^A + 0
  00000000003c  000a00000063 R_LARCH_32_PCREL  000000000000003c L0^A + 0
  000000000040  000b00000032 R_LARCH_ADD32     0000000000000064 L0^A + 0
  000000000040  000a00000037 R_LARCH_SUB32     000000000000003c L0^A + 0
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="id11">
<h3><span class="section-number">2.2.3.2. </span>二、高级用法<a class="headerlink" href="#id11" title="Link to this heading"></a></h3>
<p>下面介绍一些在调试ELF文件和操作系统中常用的命令。</p>
<section id="segments">
<h4><span class="section-number">2.2.3.2.1. </span>查看程序头表（Segments）<a class="headerlink" href="#segments" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>readelf<span class="w"> </span>-l<span class="w"> </span>&lt;elf文件&gt;
</pre></div>
</div>
<ul>
<li><p><strong>输出内容</strong>：程序加载时内存映射的段（如 <code class="docutils literal notranslate"><span class="pre">LOAD</span></code>、<code class="docutils literal notranslate"><span class="pre">DYNAMIC</span></code>）。</p></li>
<li><p><strong>关键字段</strong>：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Offset</span></code>：文件中的偏移量。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Virtual</span> <span class="pre">Address</span></code>：加载到内存的虚拟地址。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Flags</span></code>：权限（<code class="docutils literal notranslate"><span class="pre">R</span></code> 可读、<code class="docutils literal notranslate"><span class="pre">W</span></code> 可写、<code class="docutils literal notranslate"><span class="pre">X</span></code> 可执行）。</p></li>
</ul>
</li>
<li><p><strong>示例</strong>：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>  Elf file type is EXEC (Executable file)
  Entry point 0x120000540
  There are 8 program headers, starting at offset 64
  
  Program Headers:
    Type           Offset             VirtAddr           PhysAddr
                   FileSiz            MemSiz              Flags  Align
    PHDR           0x0000000000000040 0x0000000120000040 0x0000000120000040
                   0x00000000000001c0 0x00000000000001c0  R      0x8
    INTERP         0x0000000000000200 0x0000000120000200 0x0000000120000200
                   0x000000000000001e 0x000000000000001e  R      0x1
        [Requesting program interpreter: /lib/ld-musl-loongarch64.so.1]
    LOAD           0x0000000000000000 0x0000000120000000 0x0000000120000000
                   0x000000000000079c 0x000000000000079c  R E    0x10000
    LOAD           0x000000000000fdf0 0x000000012001fdf0 0x000000012001fdf0
                   0x0000000000000238 0x0000000000000270  RW     0x10000
    DYNAMIC        0x000000000000fe00 0x000000012001fe00 0x000000012001fe00
                   0x00000000000001b0 0x00000000000001b0  RW     0x8
    GNU_EH_FRAME   0x000000000000074c 0x000000012000074c 0x000000012000074c
                   0x0000000000000014 0x0000000000000014  R      0x4
    GNU_STACK      0x0000000000000000 0x0000000000000000 0x0000000000000000
                   0x0000000000000000 0x0000000000000000  RW     0x10
    GNU_RELRO      0x000000000000fdf0 0x000000012001fdf0 0x000000012001fdf0
                   0x0000000000000210 0x0000000000000210  R      0x1
  
   Section to Segment mapping:
    Segment Sections...
     00     
     01     .interp 
     02     .interp .hash .gnu.hash .dynsym .dynstr .rela.dyn .rela.plt .plt .text .rodata .eh_frame_hdr .eh_frame 
 	   03     .init_array .fini_array .dynamic .got .got.plt .sdata .bss 
 	   04     .dynamic 
 	   05     .eh_frame_hdr 
 	   06     
 	   07     .init_array .fini_array .dynamic .got
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id12">
<h4><span class="section-number">2.2.3.2.2. </span>查看调试信息<a class="headerlink" href="#id12" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>readelf<span class="w"> </span>--debug-dump<span class="o">=</span>info<span class="w"> </span>&lt;elf文件&gt;
</pre></div>
</div>
<ul>
<li><p><strong>选项扩展</strong>：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-w</span></code>：显示 DWARF 调试信息（如行号、变量位置）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--dwarf-depth=N</span></code>：限制调试信息显示的嵌套深度。</p></li>
</ul>
</li>
<li><p><strong>适用场景</strong>：逆向工程或调试崩溃问题。</p></li>
<li><p>示例：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>readelf --debug-dump=info test_main
Contents of the .debug_info section:

  Compilation Unit @ offset 0:
   Length:        0xa6 (32-bit)
   Version:       5
   Unit Type:     DW_UT_compile (1)
   Abbrev Offset: 0
   Pointer Size:  8
 &lt;0&gt;&lt;c&gt;: Abbrev Number: 4 (DW_TAG_compile_unit)
    &lt;d&gt;   DW_AT_producer    : (indirect string, offset: 0x25): GNU C23 15.2.0 -mabi=lp64d -march=la64v1.0 -mfpu=64 -msimd=none -mcmodel=normal -mtune=generic -g
    &lt;11&gt;   DW_AT_language    : 29	(C11)
    &lt;12&gt;   Unknown AT value: 90: 3
    &lt;13&gt;   Unknown AT value: 91: 0x31647
    &lt;17&gt;   DW_AT_name        : (indirect line string, offset: 0x2f): test_main.c
    &lt;1b&gt;   DW_AT_comp_dir    : (indirect line string, offset: 0): /home/airxs/user/doc/loong64_os_works_doc/test
    &lt;1f&gt;   DW_AT_low_pc      : 0x120000704
    &lt;27&gt;   DW_AT_high_pc     : 0x3c
    &lt;2f&gt;   DW_AT_stmt_list   : 0
 &lt;1&gt;&lt;33&gt;: Abbrev Number: 1 (DW_TAG_base_type)
    &lt;34&gt;   DW_AT_byte_size   : 8
    &lt;35&gt;   DW_AT_encoding    : 7	(unsigned)
    &lt;36&gt;   DW_AT_name        : (indirect string, offset: 0x13): long unsigned int
 &lt;1&gt;&lt;3a&gt;: Abbrev Number: 1 (DW_TAG_base_type)
    &lt;3b&gt;   DW_AT_byte_size   : 8
    &lt;3c&gt;   DW_AT_encoding    : 5	(signed)
    &lt;3d&gt;   DW_AT_name        : (indirect string, offset: 0x5): long int
 &lt;1&gt;&lt;41&gt;: Abbrev Number: 1 (DW_TAG_base_type)
    &lt;42&gt;   DW_AT_byte_size   : 1
    &lt;43&gt;   DW_AT_encoding    : 6	(signed char)
    &lt;44&gt;   DW_AT_name        : (indirect string, offset: 0x87): char
 &lt;1&gt;&lt;48&gt;: Abbrev Number: 5 (DW_TAG_const_type)
    &lt;49&gt;   DW_AT_type        : &lt;0x41&gt;
 &lt;1&gt;&lt;4d&gt;: Abbrev Number: 1 (DW_TAG_base_type)
    &lt;4e&gt;   DW_AT_byte_size   : 8
    &lt;4f&gt;   DW_AT_encoding    : 5	(signed)
    &lt;50&gt;   DW_AT_name        : (indirect string, offset: 0): long long int
 &lt;1&gt;&lt;54&gt;: Abbrev Number: 1 (DW_TAG_base_type)
    &lt;55&gt;   DW_AT_byte_size   : 8
    &lt;56&gt;   DW_AT_encoding    : 4	(float)
    &lt;57&gt;   DW_AT_name        : (indirect string, offset: 0x8c): double
 &lt;1&gt;&lt;5b&gt;: Abbrev Number: 6 (DW_TAG_subprogram)
    &lt;5c&gt;   DW_AT_external    : 1
    &lt;5c&gt;   DW_AT_name        : (indirect string, offset: 0xe): main
    &lt;60&gt;   DW_AT_decl_file   : 1
    &lt;61&gt;   DW_AT_decl_line   : 5
    &lt;62&gt;   DW_AT_decl_column : 5
    &lt;63&gt;   DW_AT_prototyped  : 1
    &lt;63&gt;   DW_AT_type        : &lt;0x98&gt;
    &lt;67&gt;   DW_AT_low_pc      : 0x120000704
    &lt;6f&gt;   DW_AT_high_pc     : 0x3c
    &lt;77&gt;   DW_AT_frame_base  : 1 byte block: 9c 	(DW_OP_call_frame_cfa)
    &lt;79&gt;   DW_AT_call_all_tail_calls: 1
    &lt;79&gt;   DW_AT_sibling     : &lt;0x98&gt;
 &lt;2&gt;&lt;7d&gt;: Abbrev Number: 2 (DW_TAG_formal_parameter)
    &lt;7e&gt;   DW_AT_name        : (indirect string, offset: 0x93): argc
    &lt;82&gt;   DW_AT_decl_file   : 1
    &lt;82&gt;   DW_AT_decl_line   : 5
    &lt;82&gt;   DW_AT_decl_column : 14
    &lt;83&gt;   DW_AT_type        : &lt;0x98&gt;
    &lt;87&gt;   DW_AT_location    : 2 byte block: 91 6c 	(DW_OP_fbreg: -20)
 &lt;2&gt;&lt;8a&gt;: Abbrev Number: 2 (DW_TAG_formal_parameter)
    &lt;8b&gt;   DW_AT_name        : (indirect string, offset: 0x98): argv
    &lt;8f&gt;   DW_AT_decl_file   : 1
    &lt;8f&gt;   DW_AT_decl_line   : 5
    &lt;8f&gt;   DW_AT_decl_column : 32
    &lt;90&gt;   DW_AT_type        : &lt;0x9f&gt;
    &lt;94&gt;   DW_AT_location    : 2 byte block: 91 60 	(DW_OP_fbreg: -32)
 &lt;2&gt;&lt;97&gt;: Abbrev Number: 0
 &lt;1&gt;&lt;98&gt;: Abbrev Number: 7 (DW_TAG_base_type)
    &lt;99&gt;   DW_AT_byte_size   : 4
    &lt;9a&gt;   DW_AT_encoding    : 5	(signed)
    &lt;9b&gt;   DW_AT_name        : int
 &lt;1&gt;&lt;9f&gt;: Abbrev Number: 3 (DW_TAG_pointer_type)
    &lt;a0&gt;   DW_AT_byte_size   : 8
    &lt;a0&gt;   DW_AT_type        : &lt;0xa4&gt;
 &lt;1&gt;&lt;a4&gt;: Abbrev Number: 3 (DW_TAG_pointer_type)
    &lt;a5&gt;   DW_AT_byte_size   : 8
    &lt;a5&gt;   DW_AT_type        : &lt;0x48&gt;
 &lt;1&gt;&lt;a9&gt;: Abbrev Number: 0
</pre></div>
</div>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
#### 十六进制/字符串转储
```bash
# 十六进制查看指定节区内容
readelf -x .text &lt;elf文件&gt;
</pre></div>
</div>
<ul>
<li><p><strong>示例</strong>：提取 <code class="docutils literal notranslate"><span class="pre">.text</span></code> 节的机器码：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Hex dump of section &#39;.text&#39;:
0x1200000e8 63c0ff02 6120c029 76000027 7640c002 c...a .)v..&#39;v@..
0x1200000f8 00440054 00780054 00004003 6120c028 .D.T.x.T..@.a .(
0x120000108 76000026 6340c002 2000004c 63c0ff02 v..&amp;c@.. ..Lc...
0x120000118 6120c029 76000027 7640c002 ffc7ff57 a .)v..&#39;v@.....W
0x120000128 00004003 6120c028 76000026 6340c002 ..@.a .(v..&amp;c@..
0x120000138 2000004c 63c0ff02 7620c029 7640c002  ..Lc...v .)v@..
0x120000148 ccf50718 8c010026 0b008103 04048003 .......&amp;........
0x120000158 85011500 06448003 00002b00 00004003 .....D....+...@.
0x120000168 7620c028 6340c002 2000004c 63c0ff02 v .(c@.. ..Lc...
0x120000178 7620c029 7640c002 0b748103 04001500 v .)v@...t......
0x120000188 00002b00 00004003 7620c028 6340c002 ..+...@.v .(c@..
0x120000198 2000004c                             ..L
</pre></div>
</div>
</li>
</ul>
<hr class="docutils" />
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># 字符串形式查看节区内容</span>
readelf<span class="w"> </span>-p<span class="w"> </span>.rodata<span class="w"> </span>&lt;elf文件&gt;
</pre></div>
</div>
<ul>
<li><p><strong>示例</strong>：提取 <code class="docutils literal notranslate"><span class="pre">.rodata</span></code> 节的字符串（一般都是字符串）：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>shell&gt; readelf -p .rodata hello
String dump of section &#39;.rodata&#39;:
[     0]  Hello LoongArch!\n
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id13">
<h4><span class="section-number">2.2.3.2.3. </span>4. <strong>架构特定信息</strong><a class="headerlink" href="#id13" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>readelf<span class="w"> </span>-A<span class="w"> </span>&lt;elf文件&gt;
</pre></div>
</div>
<ul class="simple">
<li><p><strong>输出内容</strong>：CPU 架构扩展信息（如 SIMD 指令支持）。</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="id14">
<h3><span class="section-number">2.2.3.3. </span>三、实战示例<a class="headerlink" href="#id14" title="Link to this heading"></a></h3>
<section id="id15">
<h4><span class="section-number">2.2.3.3.1. </span>1. <strong>分析可执行文件</strong><a class="headerlink" href="#id15" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># 查看入口地址和程序头</span>
readelf<span class="w"> </span>-h<span class="w"> </span>/bin/ls
readelf<span class="w"> </span>-l<span class="w"> </span>/bin/ls

<span class="c1"># 检查是否包含调试信息</span>
readelf<span class="w"> </span>-S<span class="w"> </span>/bin/ls<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>debug
</pre></div>
</div>
</section>
<section id="id16">
<h4><span class="section-number">2.2.3.3.2. </span>2. <strong>检查共享库依赖</strong><a class="headerlink" href="#id16" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># 查看动态段中的依赖库</span>
readelf<span class="w"> </span>-d<span class="w"> </span>libc.so.6<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>NEEDED
</pre></div>
</div>
</section>
<section id="id17">
<h4><span class="section-number">2.2.3.3.3. </span>3. <strong>定位符号地址</strong><a class="headerlink" href="#id17" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># 查找函数 `printf` 的地址</span>
readelf<span class="w"> </span>-s<span class="w"> </span>libc.so.6<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="nb">printf</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="id18">
<h3><span class="section-number">2.2.3.4. </span>四、与其他工具对比<a class="headerlink" href="#id18" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>工具</strong></p></th>
<th class="head"><p><strong>优势</strong></p></th>
<th class="head"><p><strong>局限性</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">readelf</span></code></p></td>
<td><p>专注 ELF 结构，不依赖 BFD 库</p></td>
<td><p>功能较单一（如无反汇编能力）</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">objdump</span></code></p></td>
<td><p>支持反汇编、多架构解析</p></td>
<td><p>依赖 BFD 库，可能受其缺陷影响</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<hr class="docutils" />
<section id="objdump">
<h2><span class="section-number">2.2.4. </span>objdump<a class="headerlink" href="#objdump" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">objdump</span></code> 是 GNU Binutils 工具集中的核心命令行工具，用于解析和显示二进制文件（如 ELF、COFF 等格式）的详细信息，支持反汇编、符号表分析、段信息查看等功能。以下是其核心用法及典型场景：</p>
<hr class="docutils" />
<section id="id19">
<h3><span class="section-number">2.2.4.1. </span>一、基础用法与核心选项<a class="headerlink" href="#id19" title="Link to this heading"></a></h3>
<section id="id20">
<h4><span class="section-number">2.2.4.1.1. </span>1. <strong>查看文件头信息</strong><a class="headerlink" href="#id20" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objdump<span class="w"> </span>-f<span class="w"> </span>&lt;二进制文件&gt;
</pre></div>
</div>
<ul>
<li><p><strong>作用</strong>：显示文件格式、入口地址、架构等元信息。</p></li>
<li><p><strong>示例输出</strong>：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>test:     file format elf64-x86-64
architecture: i386:x86-64, flags 0x00000112:
EXEC_P, HAS_SYMS, D_PAGED
start address 0x0000000000401160
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id21">
<h4><span class="section-number">2.2.4.1.2. </span>2. <strong>反汇编代码</strong><a class="headerlink" href="#id21" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objdump<span class="w"> </span>-d<span class="w"> </span>&lt;二进制文件&gt;<span class="w">       </span><span class="c1"># 反汇编可执行代码段（.text）</span>
objdump<span class="w"> </span>-D<span class="w"> </span>&lt;二进制文件&gt;<span class="w">       </span><span class="c1"># 反汇编所有段（包括数据段）</span>
objdump<span class="w"> </span>-d<span class="w"> </span>-j<span class="w"> </span>.text<span class="w"> </span>&lt;文件&gt;<span class="w">    </span><span class="c1"># 仅反汇编指定段（如 .text）</span>
</pre></div>
</div>
<ul>
<li><p><strong>示例输出</strong>：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>0000000000401160 &lt;main&gt;:
  401160:       55                      push   %rbp
  401161:       48 89 e5                mov    %rsp,%rbp
  401164:       48 83 ec 10             sub    $0x10,%rsp
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id22">
<h4><span class="section-number">2.2.4.1.3. </span>3. <strong>查看符号表</strong><a class="headerlink" href="#id22" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objdump<span class="w"> </span>-t<span class="w"> </span>&lt;二进制文件&gt;<span class="w">    </span><span class="c1"># 静态符号表（类似 nm -s）</span>
objdump<span class="w"> </span>-T<span class="w"> </span>&lt;二进制文件&gt;<span class="w">    </span><span class="c1"># 动态符号表（仅共享库）</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>输出字段</strong>：地址、符号类型（如 <code class="docutils literal notranslate"><span class="pre">T</span></code> 表示代码段符号）、绑定方式（<code class="docutils literal notranslate"><span class="pre">g</span></code> 全局，<code class="docutils literal notranslate"><span class="pre">l</span></code> 局部）。</p></li>
</ul>
</section>
<section id="id23">
<h4><span class="section-number">2.2.4.1.4. </span>4. <strong>查看段信息</strong><a class="headerlink" href="#id23" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objdump<span class="w"> </span>-h<span class="w"> </span>&lt;二进制文件&gt;<span class="w">    </span><span class="c1"># 显示节头信息（Size、VMA、Offset 等）</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>关键字段</strong>：</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Idx</span></code>：节索引。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Name</span></code>：节名称（如 <code class="docutils literal notranslate"><span class="pre">.text</span></code>, <code class="docutils literal notranslate"><span class="pre">.data</span></code>）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Size</span></code>：节大小（字节）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VMA</span></code>：虚拟内存地址。</p></li>
</ul>
</li>
</ul>
</section>
<section id="id24">
<h4><span class="section-number">2.2.4.1.5. </span>5. <strong>显示完整内容</strong><a class="headerlink" href="#id24" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objdump<span class="w"> </span>-s<span class="w"> </span>&lt;二进制文件&gt;<span class="w">    </span><span class="c1"># 以十六进制/ASCII 显示节内容</span>
objdump<span class="w"> </span>-s<span class="w"> </span>-j<span class="w"> </span>.rodata<span class="w"> </span>&lt;文件&gt;<span class="w">  </span><span class="c1"># 查看只读数据段（如字符串常量）</span>
</pre></div>
</div>
<ul>
<li><p><strong>示例</strong>：提取 <code class="docutils literal notranslate"><span class="pre">.rodata</span></code> 中的字符串：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Contents of section .rodata:
  402000 48656c6c6f20576f726c6421    Hello World!
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="id25">
<h3><span class="section-number">2.2.4.2. </span>二、高级用法<a class="headerlink" href="#id25" title="Link to this heading"></a></h3>
<section id="id26">
<h4><span class="section-number">2.2.4.2.1. </span>1. <strong>结合源代码反汇编</strong><a class="headerlink" href="#id26" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objdump<span class="w"> </span>-S<span class="w"> </span>&lt;二进制文件&gt;<span class="w">    </span><span class="c1"># 混合显示源代码与汇编指令（需编译时加 -g）</span>
</pre></div>
</div>
<ul>
<li><p><strong>输出示例</strong>：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>0000000000401160 &lt;main&gt;:
#include &lt;stdio.h&gt;
int main() {
  401160:       55                      push   %rbp
  401161:       48 89 e5                mov    %rsp,%rbp
  printf(&quot;Hello World!\n&quot;);
  401164:       48 8d 3d e5 ff ff ff    lea    0xffffffffffffffe5(%rip),%rdi
}
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id27">
<h4><span class="section-number">2.2.4.2.2. </span>2. <strong>指定架构与字节序</strong><a class="headerlink" href="#id27" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objdump<span class="w"> </span>-d<span class="w"> </span>--architecture<span class="o">=</span>arm<span class="w"> </span>&lt;ARM二进制文件&gt;<span class="w">  </span><span class="c1"># 分析 ARM 架构代码</span>
objdump<span class="w"> </span>-d<span class="w"> </span>-EB<span class="w"> </span>&lt;文件&gt;<span class="w">          </span><span class="c1"># 指定大端模式（默认小端）</span>
</pre></div>
</div>
</section>
<section id="id28">
<h4><span class="section-number">2.2.4.2.3. </span>3. <strong>重定位信息分析</strong><a class="headerlink" href="#id28" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objdump<span class="w"> </span>-r<span class="w"> </span>&lt;二进制文件&gt;<span class="w">    </span><span class="c1"># 显示重定位条目（如未解析的函数地址）</span>
</pre></div>
</div>
<ul>
<li><p><strong>输出示例</strong>：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>RELOCATION RECORDS FOR [.text]:
OFFSET   TYPE              VALUE
00000012 R_X86_64_PC32     add-0x0000000000000004
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id29">
<h4><span class="section-number">2.2.4.2.4. </span>4. <strong>动态链接信息</strong><a class="headerlink" href="#id29" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objdump<span class="w"> </span>-T<span class="w"> </span>&lt;共享库&gt;<span class="w">        </span><span class="c1"># 查看动态符号表（如依赖的库函数）</span>
</pre></div>
</div>
<ul>
<li><p><strong>示例输出</strong>：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>DYNAMIC SYMBOL TABLE:
  0000000000000000  w   DF *UND*  0000000000000000  GLIBC_2.2.5 printf
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id30">
<h4><span class="section-number">2.2.4.2.5. </span>5. <strong>地址范围过滤</strong><a class="headerlink" href="#id30" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objdump<span class="w"> </span>-d<span class="w"> </span>--start-address<span class="o">=</span>0x400500<span class="w"> </span>--stop-address<span class="o">=</span>0x400520<span class="w"> </span>&lt;文件&gt;
</pre></div>
</div>
<ul class="simple">
<li><p><strong>作用</strong>：仅显示指定地址范围内的反汇编代码。</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="id31">
<h3><span class="section-number">2.2.4.3. </span>三、典型应用场景<a class="headerlink" href="#id31" title="Link to this heading"></a></h3>
<section id="id32">
<h4><span class="section-number">2.2.4.3.1. </span>1. <strong>逆向工程</strong><a class="headerlink" href="#id32" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>分析恶意软件</strong>：通过 <code class="docutils literal notranslate"><span class="pre">-d</span></code> 反汇编可疑程序，定位关键函数。</p></li>
<li><p><strong>提取 Shellcode</strong>：使用 <code class="docutils literal notranslate"><span class="pre">-s</span></code> 导出 <code class="docutils literal notranslate"><span class="pre">.text</span></code> 段的原始机器码。</p></li>
</ul>
</section>
<section id="id33">
<h4><span class="section-number">2.2.4.3.2. </span>2. <strong>编译器调试</strong><a class="headerlink" href="#id33" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>验证汇编优化</strong>：对比 <code class="docutils literal notranslate"><span class="pre">-O0</span></code> 和 <code class="docutils literal notranslate"><span class="pre">-O2</span></code> 编译选项生成的汇编代码差异。</p></li>
<li><p><strong>调试链接错误</strong>：通过 <code class="docutils literal notranslate"><span class="pre">-r</span></code> 检查未解析的重定位符号。</p></li>
</ul>
</section>
<section id="id34">
<h4><span class="section-number">2.2.4.3.3. </span>3. <strong>嵌入式开发</strong><a class="headerlink" href="#id34" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>验证交叉编译结果</strong>：分析 ARM 目标文件的 <code class="docutils literal notranslate"><span class="pre">.text</span></code> 段是否符合预期。</p></li>
<li><p><strong>内存布局分析</strong>：通过 <code class="docutils literal notranslate"><span class="pre">-h</span></code> 检查 <code class="docutils literal notranslate"><span class="pre">.bss</span></code> 和 <code class="docutils literal notranslate"><span class="pre">.data</span></code> 段的大小。</p></li>
</ul>
</section>
<section id="id35">
<h4><span class="section-number">2.2.4.3.4. </span>4. <strong>安全研究</strong><a class="headerlink" href="#id35" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>检测漏洞利用</strong>：通过 <code class="docutils literal notranslate"><span class="pre">-d</span></code> 分析缓冲区溢出攻击的触发点。</p></li>
<li><p><strong>绕过反调试</strong>：解析混淆代码中的真实指令。</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="id36">
<h3><span class="section-number">2.2.4.4. </span>四、与其他工具对比<a class="headerlink" href="#id36" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>工具</strong></p></th>
<th class="head"><p><strong>优势</strong></p></th>
<th class="head"><p><strong>局限性</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">objdump</span></code></p></td>
<td><p>支持多架构、反汇编与符号分析一体化</p></td>
<td><p>无调试功能（如断点、单步执行）</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">gdb</span></code></p></td>
<td><p>动态调试能力强</p></td>
<td><p>无法直接查看二进制结构</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">readelf</span></code></p></td>
<td><p>专注 ELF 文件解析</p></td>
<td><p>不支持反汇编</p></td>
</tr>
</tbody>
</table>
</section>
<hr class="docutils" />
<section id="id37">
<h3><span class="section-number">2.2.4.5. </span>五、注意事项<a class="headerlink" href="#id37" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>调试信息依赖</strong>：使用 <code class="docutils literal notranslate"><span class="pre">-S</span></code> 或 <code class="docutils literal notranslate"><span class="pre">-l</span></code> 需编译时添加 <code class="docutils literal notranslate"><span class="pre">-g</span></code> 选项。</p></li>
<li><p><strong>架构匹配</strong>：分析非 x86 文件时需指定 <code class="docutils literal notranslate"><span class="pre">--architecture</span></code>（如 <code class="docutils literal notranslate"><span class="pre">arm</span></code>、<code class="docutils literal notranslate"><span class="pre">riscv</span></code>）。</p></li>
<li><p><strong>性能问题</strong>：对大型文件（如内核镜像）使用 <code class="docutils literal notranslate"><span class="pre">-D</span></code> 可能耗时较长。</p></li>
<li><p><strong>权限要求</strong>：分析系统文件（如 <code class="docutils literal notranslate"><span class="pre">/lib</span></code> 下的库）可能需要 <code class="docutils literal notranslate"><span class="pre">sudo</span></code>。</p></li>
</ol>
</section>
<hr class="docutils" />
<section id="id38">
<h3><span class="section-number">2.2.4.6. </span>六、实战示例<a class="headerlink" href="#id38" title="Link to this heading"></a></h3>
<section id="id39">
<h4><span class="section-number">2.2.4.6.1. </span>示例 1：分析崩溃地址<a class="headerlink" href="#id39" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objdump<span class="w"> </span>-d<span class="w"> </span>myprogram<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-A20<span class="w"> </span><span class="s2">&quot;0x400526&quot;</span><span class="w">  </span><span class="c1"># 定位崩溃地址附近的代码</span>
</pre></div>
</div>
</section>
<section id="id40">
<h4><span class="section-number">2.2.4.6.2. </span>示例 2：提取加密密钥<a class="headerlink" href="#id40" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objdump<span class="w"> </span>-s<span class="w"> </span>-j<span class="w"> </span>.data<span class="w"> </span>myapp<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;ENCRYPT_KEY&quot;</span><span class="w">  </span><span class="c1"># 从数据段提取硬编码密钥</span>
</pre></div>
</div>
</section>
<section id="id41">
<h4><span class="section-number">2.2.4.6.3. </span>示例 3：自动化脚本<a class="headerlink" href="#id41" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="k">for</span><span class="w"> </span>file<span class="w"> </span><span class="k">in</span><span class="w"> </span>*.so<span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Checking </span><span class="nv">$file</span><span class="s2">...&quot;</span>
<span class="w">  </span>objdump<span class="w"> </span>-T<span class="w"> </span><span class="nv">$file</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;GLIBC_2.28&quot;</span><span class="w">  </span><span class="c1"># 检测 glibc 版本依赖</span>
<span class="k">done</span>
</pre></div>
</div>
<hr class="docutils" />
<p>通过灵活组合选项，<code class="docutils literal notranslate"><span class="pre">objdump</span></code> 可以成为二进制分析的瑞士军刀。对于开发者，掌握其核心功能能显著提升调试和逆向工程效率。</p>
</section>
</section>
</section>
<section id="objcopy">
<h2><span class="section-number">2.2.5. </span>objcopy<a class="headerlink" href="#objcopy" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">objcopy</span></code> 是 GNU Binutils 中的核心工具，用于<strong>复制、转换和修改二进制文件</strong>（如 ELF、COFF、SREC 等格式），支持跨格式转换、节区操作、符号处理等功能。以下是其核心用法及典型场景：</p>
<hr class="docutils" />
<section id="id42">
<h3><span class="section-number">2.2.5.1. </span>一、基础用法与核心选项<a class="headerlink" href="#id42" title="Link to this heading"></a></h3>
<section id="id43">
<h4><span class="section-number">2.2.5.1.1. </span>1. <strong>格式转换</strong><a class="headerlink" href="#id43" title="Link to this heading"></a></h4>
<p>将 ELF 文件转换为纯二进制文件（去除符号和重定位信息）：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objcopy<span class="w"> </span>-O<span class="w"> </span>binary<span class="w"> </span>input.elf<span class="w"> </span>output.bin
</pre></div>
</div>
<ul class="simple">
<li><p><strong>关键选项</strong>：<code class="docutils literal notranslate"><span class="pre">-O</span> <span class="pre">&lt;格式&gt;</span></code> 指定输出格式（如 <code class="docutils literal notranslate"><span class="pre">binary</span></code>、<code class="docutils literal notranslate"><span class="pre">srec</span></code>、<code class="docutils literal notranslate"><span class="pre">elf32-i386</span></code>）。</p></li>
<li><p><strong>应用场景</strong>：生成固件烧录文件或嵌入资源到代码中。</p></li>
</ul>
</section>
<section id="id44">
<h4><span class="section-number">2.2.5.1.2. </span>2. <strong>提取或删除节区</strong><a class="headerlink" href="#id44" title="Link to this heading"></a></h4>
<ul>
<li><p><strong>提取特定节</strong>（如 <code class="docutils literal notranslate"><span class="pre">.text</span></code>）：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objcopy<span class="w"> </span>-j<span class="w"> </span>.text<span class="w"> </span>-O<span class="w"> </span>binary<span class="w"> </span>input.elf<span class="w"> </span>output.text.bin
</pre></div>
</div>
</li>
<li><p><strong>删除冗余节</strong>（如 <code class="docutils literal notranslate"><span class="pre">.comment</span></code> 和 <code class="docutils literal notranslate"><span class="pre">.note</span></code>）：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objcopy<span class="w"> </span>-R<span class="w"> </span>.comment<span class="w"> </span>-R<span class="w"> </span>.note<span class="w"> </span>input.elf<span class="w"> </span>output.cleaned.elf
</pre></div>
</div>
</li>
<li><p><strong>适用场景</strong>：减小文件体积或提取关键代码段。</p></li>
</ul>
</section>
<section id="id45">
<h4><span class="section-number">2.2.5.1.3. </span>3. <strong>剥离符号信息</strong><a class="headerlink" href="#id45" title="Link to this heading"></a></h4>
<ul>
<li><p><strong>完全剥离符号</strong>：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objcopy<span class="w"> </span>-S<span class="w"> </span>input.elf<span class="w"> </span>output.stripped.elf
</pre></div>
</div>
</li>
<li><p><strong>保留特定符号</strong>：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objcopy<span class="w"> </span>-K<span class="w"> </span>main<span class="w"> </span>-K<span class="w"> </span>global_var<span class="w"> </span>input.elf<span class="w"> </span>output.elf
</pre></div>
</div>
</li>
<li><p><strong>应用场景</strong>：保护代码隐私或优化调试信息。</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="id46">
<h3><span class="section-number">2.2.5.2. </span>二、高级功能<a class="headerlink" href="#id46" title="Link to this heading"></a></h3>
<section id="id47">
<h4><span class="section-number">2.2.5.2.1. </span>1. <strong>修改节属性</strong><a class="headerlink" href="#id47" title="Link to this heading"></a></h4>
<ul>
<li><p><strong>重命名节</strong>：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objcopy<span class="w"> </span>--rename-section<span class="w"> </span>.data<span class="o">=</span>.mydata<span class="w"> </span>input.elf<span class="w"> </span>output.elf
</pre></div>
</div>
</li>
<li><p><strong>调整段地址</strong>：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objcopy<span class="w"> </span>--change-section-address<span class="w"> </span>.text<span class="o">=</span>0x8000<span class="w"> </span>input.elf<span class="w"> </span>output.elf
</pre></div>
</div>
</li>
<li><p><strong>应用场景</strong>：兼容不同硬件地址映射或修复段布局。</p></li>
</ul>
</section>
<section id="id48">
<h4><span class="section-number">2.2.5.2.2. </span>2. <strong>符号操作</strong><a class="headerlink" href="#id48" title="Link to this heading"></a></h4>
<ul>
<li><p><strong>重命名符号</strong>：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objcopy<span class="w"> </span>--redefine-sym<span class="w"> </span><span class="nv">old_func</span><span class="o">=</span>new_func<span class="w"> </span>input.elf<span class="w"> </span>output.elf
</pre></div>
</div>
</li>
<li><p><strong>弱化符号</strong>（避免链接冲突）：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objcopy<span class="w"> </span>--weaken-symbol<span class="w"> </span>global_var<span class="w"> </span>input.elf<span class="w"> </span>output.elf
</pre></div>
</div>
</li>
<li><p><strong>应用场景</strong>：解决符号命名冲突或适配动态链接库。</p></li>
</ul>
</section>
<section id="id49">
<h4><span class="section-number">2.2.5.2.3. </span>3. <strong>填充与对齐</strong><a class="headerlink" href="#id49" title="Link to this heading"></a></h4>
<ul>
<li><p><strong>填充段间空隙</strong>：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objcopy<span class="w"> </span>--gap-fill<span class="o">=</span>0xFF<span class="w"> </span>input.elf<span class="w"> </span>output.elf
</pre></div>
</div>
</li>
<li><p><strong>填充到指定地址</strong>：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objcopy<span class="w"> </span>--pad-to<span class="o">=</span>0x1000<span class="w"> </span>input.elf<span class="w"> </span>output.elf
</pre></div>
</div>
</li>
<li><p><strong>应用场景</strong>：ROM 编程或内存对齐优化。</p></li>
</ul>
</section>
<section id="id50">
<h4><span class="section-number">2.2.5.2.4. </span>4. <strong>处理二进制数据</strong><a class="headerlink" href="#id50" title="Link to this heading"></a></h4>
<ul>
<li><p><strong>反转字节序</strong>：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objcopy<span class="w"> </span>--reverse-bytes<span class="o">=</span><span class="m">4</span><span class="w"> </span>input.bin<span class="w"> </span>output.bin
</pre></div>
</div>
</li>
<li><p><strong>截取特定字节</strong>：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objcopy<span class="w"> </span>-b<span class="w"> </span><span class="m">1</span><span class="w"> </span>-i<span class="w"> </span><span class="m">4</span><span class="w"> </span>input.bin<span class="w"> </span>output.bin<span class="w">  </span><span class="c1"># 每4字节取第1字节</span>
</pre></div>
</div>
</li>
<li><p><strong>应用场景</strong>：处理特定硬件协议的二进制数据。</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="id51">
<h3><span class="section-number">2.2.5.3. </span>三、参数详解<a class="headerlink" href="#id51" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>选项</strong></p></th>
<th class="head"><p><strong>功能</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">&lt;格式&gt;</span></code></p></td>
<td><p>指定输入文件格式（如 <code class="docutils literal notranslate"><span class="pre">elf64-x86-64</span></code>）</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-O</span> <span class="pre">&lt;格式&gt;</span></code></p></td>
<td><p>指定输出文件格式（如 <code class="docutils literal notranslate"><span class="pre">srec</span></code>）</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-F</span> <span class="pre">&lt;格式&gt;</span></code></p></td>
<td><p>强制输入/输出格式一致（不转换）</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-j</span> <span class="pre">&lt;节名&gt;</span></code></p></td>
<td><p>仅处理指定节（等效于 <code class="docutils literal notranslate"><span class="pre">--only-section</span></code>）</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-R</span> <span class="pre">&lt;节名&gt;</span></code></p></td>
<td><p>删除指定节</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--set-start</span> <span class="pre">&lt;地址&gt;</span></code></p></td>
<td><p>设置程序入口地址</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--change-section-lma</span></code></p></td>
<td><p>修改段的加载地址（LMA）</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--strip-unneeded</span></code></p></td>
<td><p>仅保留重定位需要的符号</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-v</span></code></p></td>
<td><p>显示详细操作日志</p></td>
</tr>
</tbody>
</table>
</section>
<hr class="docutils" />
<section id="id52">
<h3><span class="section-number">2.2.5.4. </span>四、典型应用场景<a class="headerlink" href="#id52" title="Link to this heading"></a></h3>
<section id="id53">
<h4><span class="section-number">2.2.5.4.1. </span>1. <strong>嵌入式开发</strong><a class="headerlink" href="#id53" title="Link to this heading"></a></h4>
<ul>
<li><p><strong>生成二进制固件</strong>：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>arm-none-eabi-objcopy<span class="w"> </span>-O<span class="w"> </span>binary<span class="w"> </span>firmware.elf<span class="w"> </span>firmware.bin
</pre></div>
</div>
</li>
<li><p><strong>提取 Bootloader</strong>：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objcopy<span class="w"> </span>-j<span class="w"> </span>.bootloader<span class="w"> </span>-O<span class="w"> </span>binary<span class="w"> </span>input.elf<span class="w"> </span>bootloader.bin
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id54">
<h4><span class="section-number">2.2.5.4.2. </span>2. <strong>逆向工程</strong><a class="headerlink" href="#id54" title="Link to this heading"></a></h4>
<ul>
<li><p><strong>分析可执行文件结构</strong>：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objcopy<span class="w"> </span>-O<span class="w"> </span>srec<span class="w"> </span>program.exe<span class="w"> </span>program.srec<span class="w">  </span><span class="c1"># 转换为 SREC 格式便于分析</span>
</pre></div>
</div>
</li>
<li><p><strong>修复损坏文件</strong>：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objcopy<span class="w"> </span>--remove-section<span class="w"> </span>.corrupted<span class="w"> </span>input.exe<span class="w"> </span>output.exe
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id55">
<h4><span class="section-number">2.2.5.4.3. </span>3. <strong>安全加固</strong><a class="headerlink" href="#id55" title="Link to this heading"></a></h4>
<ul>
<li><p><strong>移除调试符号</strong>：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objcopy<span class="w"> </span>-S<span class="w"> </span>-g<span class="w"> </span>input.elf<span class="w"> </span>output.elf
</pre></div>
</div>
</li>
<li><p><strong>混淆符号名称</strong>：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>objcopy<span class="w"> </span>--redefine-sym<span class="w"> </span><span class="nv">_start</span><span class="o">=</span>main<span class="w"> </span>input.elf<span class="w"> </span>output.elf
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="id56">
<h3><span class="section-number">2.2.5.5. </span>五、常见问题与解决<a class="headerlink" href="#id56" title="Link to this heading"></a></h3>
<section id="id57">
<h4><span class="section-number">2.2.5.5.1. </span>问题1：转换后文件无法运行<a class="headerlink" href="#id57" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>原因</strong>：删除了关键节（如 <code class="docutils literal notranslate"><span class="pre">.text</span></code> 或 <code class="docutils literal notranslate"><span class="pre">.data</span></code>）。</p></li>
<li><p><strong>解决</strong>：避免使用 <code class="docutils literal notranslate"><span class="pre">-R</span></code> 删除必要节，或通过 <code class="docutils literal notranslate"><span class="pre">objdump</span> <span class="pre">-h</span></code> 检查节依赖。</p></li>
</ul>
</section>
<section id="id58">
<h4><span class="section-number">2.2.5.5.2. </span>问题2：格式转换失败<a class="headerlink" href="#id58" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>原因</strong>：输入/输出格式不兼容（如 ELF 转 Windows PE）。</p></li>
<li><p><strong>解决</strong>：使用中间格式（如 <code class="docutils literal notranslate"><span class="pre">elf32-littlearm</span></code> → <code class="docutils literal notranslate"><span class="pre">srec</span></code> → <code class="docutils literal notranslate"><span class="pre">hex</span></code>）。</p></li>
</ul>
</section>
<section id="id59">
<h4><span class="section-number">2.2.5.5.3. </span>问题3：符号重命名无效<a class="headerlink" href="#id59" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>原因</strong>：未指定全局符号或格式不支持。</p></li>
<li><p><strong>解决</strong>：使用 <code class="docutils literal notranslate"><span class="pre">--globalize-symbol</span></code> 或检查目标格式是否允许符号修改。</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="id60">
<h3><span class="section-number">2.2.5.6. </span>六、与其他工具对比<a class="headerlink" href="#id60" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>工具</strong></p></th>
<th class="head"><p><strong>优势</strong></p></th>
<th class="head"><p><strong>局限性</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">objcopy</span></code></p></td>
<td><p>支持跨格式转换和节级操作</p></td>
<td><p>无法反汇编或调试</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">readelf</span></code></p></td>
<td><p>专注 ELF 文件分析</p></td>
<td><p>不支持格式转换</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">strip</span></code></p></td>
<td><p>仅剥离符号和调试信息</p></td>
<td><p>功能单一，无法修改节内容</p></td>
</tr>
</tbody>
</table>
</section>
<hr class="docutils" />
<section id="id61">
<h3><span class="section-number">2.2.5.7. </span>七、总结<a class="headerlink" href="#id61" title="Link to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">objcopy</span></code> 是二进制文件处理的瑞士军刀，适用于：</p>
<ul class="simple">
<li><p><strong>嵌入式开发</strong>：生成固件、提取代码段。</p></li>
<li><p><strong>安全加固</strong>：移除敏感信息、混淆符号。</p></li>
<li><p><strong>逆向工程</strong>：分析文件结构、修复损坏文件。</p></li>
</ul>
<p>通过灵活组合选项（如 <code class="docutils literal notranslate"><span class="pre">-O</span> <span class="pre">binary</span> <span class="pre">-R</span> <span class="pre">.comment</span> <span class="pre">-S</span></code>），开发者可以高效完成二进制文件的转换与优化。</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="页脚">
    <a href="gcc.html" class="btn btn-neutral float-left" title="2.1. GCC" accesskey="p"
      rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
    <a href="rust.html" class="btn btn-neutral float-right" title="2.3. Rust" accesskey="n"
      rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>

  <hr />

  <div role="contentinfo">
    <p>&#169; 版权所有 2022-2026, 龙芯中科技术有限公司。
      <span class="lastupdated">最后更新于 2026年2月10日 11:15:08.
      </span>

      <!-- 
      <span class="footer-aside">
        <a href="../../龙芯实验室文档.pdf" class="fa fa-file-pdf-o">&nbsp下载 PDF</a>
      </span>
       -->
    </p>
  </div> 

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>